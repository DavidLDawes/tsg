{"version":3,"file":"592.a5727bc8796ab958d2f4.js","mappings":"iLAWA,MA4JA,EA5JgDA,EAAGC,SAAQC,oBAAmBC,oBAAmBC,eAC/F,MAAMC,EAAsBA,CAACC,EAAkCC,KAC7D,MAAMC,EAAY,IAAIP,GAChBQ,EAAgBD,EAAUE,UAAUC,GAAKA,EAAEC,aAAeN,EAAUO,MAE1E,GAAoB,IAAhBN,EAEEE,GAAiB,GACnBD,EAAUM,OAAOL,EAAe,OAE7B,CACL,MAAMM,EAAmB,CACvBH,WAAYN,EAAUO,KACtBG,SAAUT,EACVU,KAAMX,EAAUW,KAChBC,KAAMZ,EAAUY,MAGdT,GAAiB,EACnBD,EAAUC,GAAiBM,EAE3BP,EAAUW,KAAKJ,EAEnB,CAEAX,EAASI,IAGLY,EAAoBd,IACxB,MAAMe,EAAQpB,EAAOqB,KAAKX,GAAKA,EAAEC,aAAeN,GAChD,OAAOe,GAAOL,UAAY,GAGtBO,EAAqBA,IAClBH,EAAiB,cAAgBA,EAAiB,qBAGrDI,EAAwBA,SACCC,IAAtBtB,EAAkCA,EAAoBD,EAAkBwB,MAG3EC,EAAsBA,IACnBJ,KAAwBC,IAG3BI,EAAoBA,KACxB,MAAMC,EAAkBN,IAClBO,EAAYN,IAClB,OAAOO,KAAKC,IAAI,EAAGH,EAAkBC,IAmBvC,OAfAG,EAAAA,EAAAA,WAAU,KACR,MAAMJ,EAAkBN,IAClBO,EAAYN,IAElB,GAAIK,EAAkBC,GAAaA,EAAY,EAAG,CAChD,MAAMI,EAAYJ,EAAYD,EACxBM,EAAoBf,EAAiB,cAE3Cf,EACE+B,EAAAA,GAAYd,KAAKe,GAAkB,eAAZA,EAAGxB,MAC1BsB,EAAoBD,EAExB,GACC,CAAChC,EAAkBwB,MAAOvB,KAG3BmC,EAAAA,EAAAA,MAAA,OAAKC,UAAU,gBAAeC,SAAA,EAC5BC,EAAAA,EAAAA,KAAA,KAAAD,SAAG,gGAEHF,EAAAA,EAAAA,MAAA,OAAKC,UAAU,qBAAoBC,SAAA,EACjCC,EAAAA,EAAAA,KAAA,MAAAD,SAAI,oBACJF,EAAAA,EAAAA,MAAA,KAAAE,SAAA,EAAGC,EAAAA,EAAAA,KAAA,UAAAD,SAAQ,gBAAoB,IAAEhB,OAChCI,KAAuB,IACtBU,EAAAA,EAAAA,MAAA,KAAAE,SAAA,EAAGC,EAAAA,EAAAA,KAAA,UAAAD,SAAQ,gBAAoB,IAAEZ,QAEnCU,EAAAA,EAAAA,MAAA,KAAAE,SAAA,EAAGC,EAAAA,EAAAA,KAAA,UAAAD,SAAQ,sBAA0B,IAAEjB,QACvCkB,EAAAA,EAAAA,KAAA,KAAGF,UAAWZ,IAAwB,QAAU,UAAUa,SACvDb,IAAwB,0BAA4B,yCAIzDc,EAAAA,EAAAA,KAAA,OAAKF,UAAU,wBAAuBC,UACpCC,EAAAA,EAAAA,KAAA,OAAKF,UAAU,kBAAiBC,SAC7BJ,EAAAA,GAAYM,IAAIpC,IACf,MAAMU,EAAWI,EAAiBd,EAAUO,MAE5C,OACEyB,EAAAA,EAAAA,MAAA,OAA0BC,UAAU,iBAAgBC,SAAA,EAClDF,EAAAA,EAAAA,MAAA,OAAKC,UAAU,iBAAgBC,SAAA,EAC7BF,EAAAA,EAAAA,MAAA,MAAAE,SAAA,CAAKlC,EAAUqC,KAAK,IAAErC,EAAUsC,UAAY,iBAC5CN,EAAAA,EAAAA,MAAA,KAAAE,SAAA,CAAIlC,EAAUW,KAAK,UAAQX,EAAUY,KAAK,eACzCF,EAAW,IACVsB,EAAAA,EAAAA,MAAA,KAAAE,SAAA,EAAGC,EAAAA,EAAAA,KAAA,UAAAD,SAAQ,WAAe,KAAGlC,EAAUW,KAAOD,GAAU6B,QAAQ,GAAG,WAASvC,EAAUY,KAAOF,GAAU6B,QAAQ,GAAG,cAGtHJ,EAAAA,EAAAA,KAAA,OAAKF,UAAU,mBAAkBC,UAC/BF,EAAAA,EAAAA,MAAA,SAAAE,SAAA,CAAO,aAELC,EAAAA,EAAAA,KAAA,SACE5B,KAAK,SACLiC,IAAI,IACJC,MAAO/B,EACPgC,SAAWC,GAAM5C,EAAoBC,EAAW4C,SAASD,EAAEE,OAAOJ,QAAU,GAC5EK,MAAO,CAAEC,MAAO,OAAQC,WAAY,mBAhBlChD,EAAUO,aA0B5ByB,EAAAA,EAAAA,MAAA,OAAKC,UAAU,gBAAeC,SAAA,EAC5BC,EAAAA,EAAAA,KAAA,MAAAD,SAAI,kBACe,IAAlBvC,EAAOsD,QACNd,EAAAA,EAAAA,KAAA,KAAAD,SAAG,2BAEHF,EAAAA,EAAAA,MAAA,SAAAE,SAAA,EACEC,EAAAA,EAAAA,KAAA,SAAAD,UACEF,EAAAA,EAAAA,MAAA,MAAAE,SAAA,EACEC,EAAAA,EAAAA,KAAA,MAAAD,SAAI,gBACJC,EAAAA,EAAAA,KAAA,MAAAD,SAAI,cACJC,EAAAA,EAAAA,KAAA,MAAAD,SAAI,cACJC,EAAAA,EAAAA,KAAA,MAAAD,SAAI,qBAGRC,EAAAA,EAAAA,KAAA,SAAAD,SACGvC,EAAOyC,IAAIrB,IACViB,EAAAA,EAAAA,MAAA,MAAAE,SAAA,EACEC,EAAAA,EAAAA,KAAA,MAAAD,SAAKJ,EAAAA,GAAYd,KAAKe,GAAMA,EAAGxB,OAASQ,EAAMT,aAAa+B,MAAQtB,EAAMT,cACzE6B,EAAAA,EAAAA,KAAA,MAAAD,SAAKnB,EAAML,YACXyB,EAAAA,EAAAA,KAAA,MAAAD,UAAMnB,EAAMJ,KAAOI,EAAML,UAAU6B,QAAQ,MAC3CJ,EAAAA,EAAAA,KAAA,MAAAD,UAAMnB,EAAMH,KAAOG,EAAML,UAAU6B,QAAQ,OAJpCxB,EAAMT,sBAYzB0B,EAAAA,EAAAA,MAAA,OAAKC,UAAU,kBAAiBC,SAAA,EAC9BC,EAAAA,EAAAA,KAAA,MAAAD,SAAI,mBACJC,EAAAA,EAAAA,KAAA,MAAAD,UACEF,EAAAA,EAAAA,MAAA,MAAIC,UAAWZ,IAAwB,QAAU,UAAUa,SAAA,CACxDb,IAAwB,IAAM,IAAI,aAAWH,IAAwB,kC","sources":["webpack://starship-designer/./src/components/BerthsPanel.tsx"],"sourcesContent":["import React, { useEffect } from 'react';\nimport type { Berth, StaffRequirements } from '../types/ship';\nimport { BERTH_TYPES } from '../data/constants';\n\ninterface BerthsPanelProps {\n  berths: Berth[];\n  staffRequirements: StaffRequirements;\n  adjustedCrewCount?: number;\n  onUpdate: (berths: Berth[]) => void;\n}\n\nconst BerthsPanel: React.FC<BerthsPanelProps> = ({ berths, staffRequirements, adjustedCrewCount, onUpdate }) => {\n  const updateBerthQuantity = (berthType: typeof BERTH_TYPES[0], newQuantity: number) => {\n    const newBerths = [...berths];\n    const existingIndex = newBerths.findIndex(b => b.berth_type === berthType.type);\n    \n    if (newQuantity === 0) {\n      // Remove berth if quantity is 0\n      if (existingIndex >= 0) {\n        newBerths.splice(existingIndex, 1);\n      }\n    } else {\n      const berthData: Berth = {\n        berth_type: berthType.type as Berth['berth_type'],\n        quantity: newQuantity,\n        mass: berthType.mass,\n        cost: berthType.cost\n      };\n      \n      if (existingIndex >= 0) {\n        newBerths[existingIndex] = berthData;\n      } else {\n        newBerths.push(berthData);\n      }\n    }\n    \n    onUpdate(newBerths);\n  };\n\n  const getBerthQuantity = (berthType: string): number => {\n    const berth = berths.find(b => b.berth_type === berthType);\n    return berth?.quantity || 0;\n  };\n\n  const getTotalStaterooms = (): number => {\n    return getBerthQuantity('staterooms') + getBerthQuantity('luxury_staterooms');\n  };\n\n  const getEffectiveCrewCount = (): number => {\n    return adjustedCrewCount !== undefined ? adjustedCrewCount : staffRequirements.total;\n  };\n\n  const hasEnoughStaterooms = (): boolean => {\n    return getTotalStaterooms() >= getEffectiveCrewCount();\n  };\n\n  const getPassengerCount = (): number => {\n    const totalStaterooms = getTotalStaterooms();\n    const crewCount = getEffectiveCrewCount();\n    return Math.max(0, totalStaterooms - crewCount);\n  };\n\n  // Ensure minimum staterooms match crew requirements\n  useEffect(() => {\n    const totalStaterooms = getTotalStaterooms();\n    const crewCount = getEffectiveCrewCount();\n    \n    if (totalStaterooms < crewCount && crewCount > 0) {\n      const shortfall = crewCount - totalStaterooms;\n      const currentStaterooms = getBerthQuantity('staterooms');\n      \n      updateBerthQuantity(\n        BERTH_TYPES.find(bt => bt.type === 'staterooms')!,\n        currentStaterooms + shortfall\n      );\n    }\n  }, [staffRequirements.total, adjustedCrewCount]);\n\n  return (\n    <div className=\"panel-content\">\n      <p>Configure crew and passenger accommodations. Staterooms are required for all crew members.</p>\n      \n      <div className=\"berth-requirements\">\n        <h3>Accommodations</h3>\n        <p><strong>Total Crew:</strong> {getEffectiveCrewCount()}</p>\n        {getPassengerCount() >= 1 && (\n          <p><strong>Passengers:</strong> {getPassengerCount()}</p>\n        )}\n        <p><strong>Total Staterooms:</strong> {getTotalStaterooms()}</p>\n        <p className={hasEnoughStaterooms() ? 'valid' : 'invalid'}>\n          {hasEnoughStaterooms() ? '✓ Sufficient staterooms' : '⚠️ Need more staterooms for crew'}\n        </p>\n      </div>\n\n      <div className=\"berths-grouped-layout\">\n        <div className=\"berth-group-row\">\n          {BERTH_TYPES.map(berthType => {\n            const quantity = getBerthQuantity(berthType.type);\n\n            return (\n              <div key={berthType.type} className=\"component-item\">\n                <div className=\"component-info\">\n                  <h4>{berthType.name} {berthType.required && '(Required)'}</h4>\n                  <p>{berthType.mass} tons, {berthType.cost} MCr each</p>\n                  {quantity > 0 && (\n                    <p><strong>Total:</strong> {(berthType.mass * quantity).toFixed(1)} tons, {(berthType.cost * quantity).toFixed(2)} MCr</p>\n                  )}\n                </div>\n                <div className=\"quantity-control\">\n                  <label>\n                    Quantity:\n                    <input\n                      type=\"number\"\n                      min=\"0\"\n                      value={quantity}\n                      onChange={(e) => updateBerthQuantity(berthType, parseInt(e.target.value) || 0)}\n                      style={{ width: '60px', marginLeft: '0.5rem' }}\n                    />\n                  </label>\n                </div>\n              </div>\n            );\n          })}\n        </div>\n      </div>\n\n      <div className=\"berth-summary\">\n        <h3>Berth Summary</h3>\n        {berths.length === 0 ? (\n          <p>No berths configured.</p>\n        ) : (\n          <table>\n            <thead>\n              <tr>\n                <th>Berth Type</th>\n                <th>Quantity</th>\n                <th>Mass (t)</th>\n                <th>Cost (MCr)</th>\n              </tr>\n            </thead>\n            <tbody>\n              {berths.map(berth => (\n                <tr key={berth.berth_type}>\n                  <td>{BERTH_TYPES.find(bt => bt.type === berth.berth_type)?.name || berth.berth_type}</td>\n                  <td>{berth.quantity}</td>\n                  <td>{(berth.mass * berth.quantity).toFixed(1)}</td>\n                  <td>{(berth.cost * berth.quantity).toFixed(2)}</td>\n                </tr>\n              ))}\n            </tbody>\n          </table>\n        )}\n      </div>\n\n      <div className=\"validation-info\">\n        <h3>Requirements:</h3>\n        <ul>\n          <li className={hasEnoughStaterooms() ? 'valid' : 'invalid'}>\n            {hasEnoughStaterooms() ? '✓' : '✗'} At least {getEffectiveCrewCount()} staterooms for crew\n          </li>\n        </ul>\n      </div>\n\n    </div>\n  );\n};\n\nexport default BerthsPanel;"],"names":["BerthsPanel","berths","staffRequirements","adjustedCrewCount","onUpdate","updateBerthQuantity","berthType","newQuantity","newBerths","existingIndex","findIndex","b","berth_type","type","splice","berthData","quantity","mass","cost","push","getBerthQuantity","berth","find","getTotalStaterooms","getEffectiveCrewCount","undefined","total","hasEnoughStaterooms","getPassengerCount","totalStaterooms","crewCount","Math","max","useEffect","shortfall","currentStaterooms","BERTH_TYPES","bt","_jsxs","className","children","_jsx","map","name","required","toFixed","min","value","onChange","e","parseInt","target","style","width","marginLeft","length"],"sourceRoot":""}