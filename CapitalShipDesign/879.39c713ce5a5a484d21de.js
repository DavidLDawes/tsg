"use strict";(self.webpackChunkstarship_designer=self.webpackChunkstarship_designer||[]).push([[879],{879:(e,r,s)=>{s.r(r),s.d(r,{default:()=>a}),s(540);var n=s(749),i=s(848);const a=({engines:e,shipTonnage:r,shipTechLevel:s,fuelWeeks:a,activeRules:l,onUpdate:d,onFuelWeeksUpdate:c})=>{const t=r=>e.find(e=>e.engine_type===r)||("maneuver_drive"===r?{engine_type:r,drive_code:"M-0",performance:0,mass:0,cost:0}:{engine_type:r,drive_code:"",performance:1,mass:.1,cost:0}),o=(r,s)=>{const n=[...e],i=n.findIndex(e=>e.engine_type===r),a={...t(r),...s,engine_type:r};i>=0?n[i]=a:n.push(a),d(n)},m=(e,a)=>{const l=t(e),d=t("power_plant"),c=d.drive_code&&d.performance>0?d.performance:void 0,m=(0,n.l2)(r,e,c,s);return(0,i.jsxs)("div",{className:"engine-group",children:[(0,i.jsx)("h3",{children:a}),(0,i.jsx)("div",{className:"form-row",children:(0,i.jsxs)("div",{className:"form-group",children:[(0,i.jsxs)("label",{children:["Drive Selection ","maneuver_drive"===e?"":"*"]}),(0,i.jsxs)("select",{value:l.drive_code,onChange:r=>{if("M-0"===r.target.value&&"maneuver_drive"===e)o(e,{drive_code:"M-0",performance:0,mass:0,cost:0});else{const s=m.find(e=>e.code===r.target.value);s&&o(e,{drive_code:s.code,performance:s.performance,mass:s.mass,cost:s.cost})}},children:[(0,i.jsx)("option",{value:"",children:"Select a drive..."}),"maneuver_drive"===e&&(0,i.jsx)("option",{value:"M-0",children:"None (M-0 performance, 0 tons, 0 MCr)"}),m.map(e=>(0,i.jsx)("option",{value:e.code,children:e.label},e.code))]}),"jump_drive"===e&&(0,i.jsxs)("small",{children:["Limited by Tech Level ",s," (max J-",m.length>0?m[m.length-1].performance:1,")",c?` and Power Plant P-${c}`:""]}),"maneuver_drive"===e&&c&&(0,i.jsxs)("small",{children:["Limited by Power Plant P-",c]}),"maneuver_drive"===e&&!c&&(0,i.jsx)("small",{className:"info",children:"Select Power Plant first to see power-limited options"})]})}),l.drive_code&&(0,i.jsx)("div",{className:"engine-info",children:(0,i.jsxs)("small",{children:["Performance: ",l.performance," (","jump_drive"===e?"J":"maneuver_drive"===e?"M":"P","-",l.performance,")"]})})]},e)},h=t("power_plant"),v=t("jump_drive"),p=t("maneuver_drive"),u=(!v.drive_code||v.performance<=h.performance)&&(!p.drive_code||p.performance<=h.performance),x=l.has("antimatter"),j=v.performance>0?(0,n.pf)(r,v.performance):0,f=p.performance>0?(0,n.oZ)(r,p.performance,a):0,_=x?.1*j:j,g=x?.1*f:f,w=_+g,M=e.reduce((e,r)=>e+r.mass,0),N=r-M,P=w<=N,y=p.performance>0?Math.floor(2*(N-_)/(.01*r*p.performance*(x?.1:1))):12,F=Math.min(12,Math.max(2,y)),b=e.some(e=>"power_plant"===e.engine_type&&e.drive_code&&e.performance>=1)&&e.some(e=>"jump_drive"===e.engine_type&&e.drive_code&&e.performance>=1)&&u&&P;return(0,i.jsxs)("div",{className:"panel-content",children:[(0,i.jsx)("p",{children:"Configure the engine types for your starship. Power Plant and Jump Drive are required. Maneuver Drive is optional (defaults to M-0)."}),(0,i.jsx)("p",{children:(0,i.jsxs)("small",{children:[(0,i.jsx)("strong",{children:"Note:"})," Jump and Maneuver drives require a Power Plant with equal or higher performance rating."]})}),(0,i.jsxs)("div",{className:"engines-horizontal-layout",children:[m("power_plant","Power Plant"),m("maneuver_drive","Maneuver Drive"),m("jump_drive","Jump Drive")]}),(0,i.jsxs)("div",{className:"fuel-section",children:[(0,i.jsx)("h3",{children:"Fuel Requirements"}),(0,i.jsxs)("div",{className:"fuel-horizontal-layout",children:[(0,i.jsx)("div",{className:"fuel-selection",children:(0,i.jsxs)("div",{className:"form-group",children:[(0,i.jsx)("label",{htmlFor:"fuel-weeks",children:"Power Plant Fuel Duration"}),(0,i.jsx)("select",{id:"fuel-weeks",value:a,onChange:e=>c(parseInt(e.target.value)),children:Array.from({length:F-1},(e,r)=>r+2).map(e=>(0,i.jsxs)("option",{value:e,children:[e," weeks"]},e))}),(0,i.jsxs)("small",{children:["Maximum ",F," weeks based on available mass"]})]})}),(0,i.jsxs)("div",{className:"fuel-summary",children:[(0,i.jsxs)("h4",{children:["Fuel Mass Breakdown",x?" (Antimatter)":"",":"]}),(0,i.jsx)("table",{children:(0,i.jsxs)("tbody",{children:[(0,i.jsxs)("tr",{children:[(0,i.jsx)("td",{children:"Jump Fuel (per jump):"}),(0,i.jsxs)("td",{children:[_.toFixed(1)," tons"]}),(0,i.jsx)("td",{children:(0,i.jsxs)("small",{children:["(",v.performance>0?`J-${v.performance}`:"No Jump Drive"," × 0.1 × ",r,"t",x?" × 0.1 antimatter":"",")"]})})]}),(0,i.jsxs)("tr",{children:[(0,i.jsxs)("td",{children:["Maneuver Fuel (",a," weeks):"]}),(0,i.jsxs)("td",{children:[g.toFixed(1)," tons"]}),(0,i.jsx)("td",{children:(0,i.jsxs)("small",{children:["(",p.performance>0?`M-${p.performance}`:"No Maneuver Drive"," × 0.01 × ",r,"t × ",a/2,x?" × 0.1 antimatter":"",")"]})})]}),x&&(0,i.jsxs)("tr",{className:"antimatter-savings",children:[(0,i.jsx)("td",{children:(0,i.jsx)("em",{children:"Antimatter Fuel Savings:"})}),(0,i.jsx)("td",{children:(0,i.jsxs)("em",{children:[(.9*(j+f)).toFixed(1)," tons saved"]})}),(0,i.jsx)("td",{children:(0,i.jsx)("small",{children:(0,i.jsx)("em",{children:"90% reduction from standard fuel"})})})]}),(0,i.jsxs)("tr",{className:"total-row",children:[(0,i.jsx)("td",{children:(0,i.jsx)("strong",{children:"Total Fuel Mass:"})}),(0,i.jsx)("td",{children:(0,i.jsxs)("strong",{children:[w.toFixed(1)," tons"]})}),(0,i.jsx)("td",{children:(0,i.jsxs)("small",{children:[(w/r*100).toFixed(1),"% of ship mass"]})})]})]})})]})]})]}),(0,i.jsxs)("div",{className:"validation-info",children:[(0,i.jsx)("h3",{children:"Requirements:"}),(0,i.jsxs)("ul",{children:[(0,i.jsx)("li",{className:e.some(e=>"power_plant"===e.engine_type)?"valid":"invalid",children:"✓ Power Plant configured"}),(0,i.jsx)("li",{className:"valid",children:"✓ Maneuver Drive configured (M-0 if none selected)"}),(0,i.jsx)("li",{className:e.some(e=>"jump_drive"===e.engine_type)?"valid":"invalid",children:"✓ Jump Drive configured"}),(0,i.jsx)("li",{className:u?"valid":"invalid",children:"✓ Power Plant provides sufficient power for Jump and Maneuver drives"}),(0,i.jsx)("li",{className:P?"valid":"invalid",children:"✓ Fuel requirements fit within available ship mass"}),(0,i.jsx)("li",{className:b?"valid":"invalid",children:"✓ Required engines have valid drive selection with automatic mass and cost"})]})]}),(0,i.jsxs)("div",{className:"engine-summary",children:[(0,i.jsx)("h3",{children:"Engine Summary:"}),(0,i.jsxs)("table",{children:[(0,i.jsx)("thead",{children:(0,i.jsxs)("tr",{children:[(0,i.jsx)("th",{children:"Engine Type"}),(0,i.jsx)("th",{children:"Drive"}),(0,i.jsx)("th",{children:"Performance"}),(0,i.jsx)("th",{children:"Mass (tons)"}),(0,i.jsx)("th",{children:"Cost (MCr)"})]})}),(0,i.jsx)("tbody",{children:["power_plant","maneuver_drive","jump_drive"].map(e=>{const r=t(e);return(0,i.jsxs)("tr",{children:[(0,i.jsx)("td",{children:e.replace("_"," ").replace(/\b\w/g,e=>e.toUpperCase())}),(0,i.jsx)("td",{children:r.drive_code||"-"}),(0,i.jsxs)("td",{children:[r.performance," (","jump_drive"===e?"J":"maneuver_drive"===e?"M":"P","-",r.performance,")"]}),(0,i.jsx)("td",{children:r.mass.toFixed(1)}),(0,i.jsx)("td",{children:r.cost.toFixed(2)})]},e)})})]})]})]})}}}]);
//# sourceMappingURL=879.39c713ce5a5a484d21de.js.map