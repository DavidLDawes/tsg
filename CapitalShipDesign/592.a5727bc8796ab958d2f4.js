"use strict";(self.webpackChunkstarship_designer=self.webpackChunkstarship_designer||[]).push([[592],{592:(e,s,t)=>{t.r(s),t.d(s,{default:()=>a});var r=t(540),n=t(749),i=t(848);const a=({berths:e,staffRequirements:s,adjustedCrewCount:t,onUpdate:a})=>{const d=(s,t)=>{const r=[...e],n=r.findIndex(e=>e.berth_type===s.type);if(0===t)n>=0&&r.splice(n,1);else{const e={berth_type:s.type,quantity:t,mass:s.mass,cost:s.cost};n>=0?r[n]=e:r.push(e)}a(r)},c=s=>{const t=e.find(e=>e.berth_type===s);return t?.quantity||0},l=()=>c("staterooms")+c("luxury_staterooms"),o=()=>void 0!==t?t:s.total,h=()=>l()>=o(),m=()=>{const e=l(),s=o();return Math.max(0,e-s)};return(0,r.useEffect)(()=>{const e=l(),s=o();if(e<s&&s>0){const t=s-e,r=c("staterooms");d(n.K4.find(e=>"staterooms"===e.type),r+t)}},[s.total,t]),(0,i.jsxs)("div",{className:"panel-content",children:[(0,i.jsx)("p",{children:"Configure crew and passenger accommodations. Staterooms are required for all crew members."}),(0,i.jsxs)("div",{className:"berth-requirements",children:[(0,i.jsx)("h3",{children:"Accommodations"}),(0,i.jsxs)("p",{children:[(0,i.jsx)("strong",{children:"Total Crew:"})," ",o()]}),m()>=1&&(0,i.jsxs)("p",{children:[(0,i.jsx)("strong",{children:"Passengers:"})," ",m()]}),(0,i.jsxs)("p",{children:[(0,i.jsx)("strong",{children:"Total Staterooms:"})," ",l()]}),(0,i.jsx)("p",{className:h()?"valid":"invalid",children:h()?"✓ Sufficient staterooms":"⚠️ Need more staterooms for crew"})]}),(0,i.jsx)("div",{className:"berths-grouped-layout",children:(0,i.jsx)("div",{className:"berth-group-row",children:n.K4.map(e=>{const s=c(e.type);return(0,i.jsxs)("div",{className:"component-item",children:[(0,i.jsxs)("div",{className:"component-info",children:[(0,i.jsxs)("h4",{children:[e.name," ",e.required&&"(Required)"]}),(0,i.jsxs)("p",{children:[e.mass," tons, ",e.cost," MCr each"]}),s>0&&(0,i.jsxs)("p",{children:[(0,i.jsx)("strong",{children:"Total:"})," ",(e.mass*s).toFixed(1)," tons, ",(e.cost*s).toFixed(2)," MCr"]})]}),(0,i.jsx)("div",{className:"quantity-control",children:(0,i.jsxs)("label",{children:["Quantity:",(0,i.jsx)("input",{type:"number",min:"0",value:s,onChange:s=>d(e,parseInt(s.target.value)||0),style:{width:"60px",marginLeft:"0.5rem"}})]})})]},e.type)})})}),(0,i.jsxs)("div",{className:"berth-summary",children:[(0,i.jsx)("h3",{children:"Berth Summary"}),0===e.length?(0,i.jsx)("p",{children:"No berths configured."}):(0,i.jsxs)("table",{children:[(0,i.jsx)("thead",{children:(0,i.jsxs)("tr",{children:[(0,i.jsx)("th",{children:"Berth Type"}),(0,i.jsx)("th",{children:"Quantity"}),(0,i.jsx)("th",{children:"Mass (t)"}),(0,i.jsx)("th",{children:"Cost (MCr)"})]})}),(0,i.jsx)("tbody",{children:e.map(e=>(0,i.jsxs)("tr",{children:[(0,i.jsx)("td",{children:n.K4.find(s=>s.type===e.berth_type)?.name||e.berth_type}),(0,i.jsx)("td",{children:e.quantity}),(0,i.jsx)("td",{children:(e.mass*e.quantity).toFixed(1)}),(0,i.jsx)("td",{children:(e.cost*e.quantity).toFixed(2)})]},e.berth_type))})]})]}),(0,i.jsxs)("div",{className:"validation-info",children:[(0,i.jsx)("h3",{children:"Requirements:"}),(0,i.jsx)("ul",{children:(0,i.jsxs)("li",{className:h()?"valid":"invalid",children:[h()?"✓":"✗"," At least ",o()," staterooms for crew"]})})]})]})}}}]);
//# sourceMappingURL=592.a5727bc8796ab958d2f4.js.map