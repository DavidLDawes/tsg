"use strict";(self.webpackChunkstarship_designer=self.webpackChunkstarship_designer||[]).push([[529],{529:(e,n,a)=>{a.r(n),a.d(n,{default:()=>t}),a(540);var s=a(749),i=a(848);const t=({weapons:e,shipTonnage:n,shipTechLevel:a,engines:t,spinalWeapon:l,missileReloads:o,remainingMass:r,onUpdate:m,onSpinalWeaponUpdate:c,onMissileReloadsUpdate:d})=>{const p=(0,s.LM)(n),h=(0,s.mr)(l,a),u=s.G3.map(e=>e.name),x=e.filter(e=>!u.includes(e.weapon_name)),j=e.filter(e=>u.includes(e.weapon_name)),g=j.reduce((e,n)=>e+n.quantity,0),w=x.reduce((e,n)=>e+n.quantity,0)+g+h,v=t.find(e=>"power_plant"===e.engine_type),f=v?.performance||0,y=(0,s.gK)(f,n),N=p-w,b=Math.min(y,N+g),M=e.some(e=>e.weapon_name.toLowerCase().includes("missile launcher")&&e.quantity>0),q=Math.floor(r-o),_=(n,a)=>{const s=Math.max(0,Math.floor(a)),i=e.find(e=>e.weapon_name===n.name),t=i?.quantity||0,l=s-t,o=e.find(e=>"Hard Point"===e.weapon_name),r=o?.quantity||0,c=e.reduce((e,a)=>a.weapon_name===n.name?e:e+a.quantity,0),d=p-c;if(l>0){const a="Hard Point"===n.name?d:d+r,s=t+Math.min(l,a);let o=0;if("Hard Point"!==n.name){const e=s-t,n=d-r;e>n&&(o=Math.min(e-n,r))}let c=e;o>0&&(c=c.map(e=>"Hard Point"===e.weapon_name?{...e,quantity:r-o}:e).filter(e=>e.quantity>0)),c=0===s?c.filter(e=>e.weapon_name!==n.name):i?c.map(e=>e.weapon_name===n.name?{...e,quantity:s}:e):[...c,{weapon_name:n.name,mass:n.mass,cost:n.cost,quantity:s}],m(c)}else if(0===s)m(e.filter(e=>e.weapon_name!==n.name));else if(i){const a=e.map(e=>e.weapon_name===n.name?{...e,quantity:s}:e);m(a)}},C=e.find(e=>"Hard Point"===e.weapon_name),L=C?.quantity||0,P=p-w;return(0,i.jsxs)("div",{className:"panel-content",children:[(0,i.jsxs)("p",{children:["Available weapon mounts: ",p," (Used: ",w,", Remaining: ",P,")",h>0&&(0,i.jsxs)("span",{children:[" | Spinal weapon: ",h," mounts"]}),g>0&&(0,i.jsxs)("span",{children:[" | Bay weapons: ",g," mounts"]}),L>0&&(0,i.jsxs)("span",{children:[" | Hard Points: ",L]})]}),(0,i.jsx)("div",{style:{marginBottom:"10px"},children:(0,i.jsxs)("button",{onClick:()=>{const e=p-w;if(e>0){const n=s.Rb.find(e=>"Hard Point"===e.name);n&&_(n,e)}},disabled:0===P,style:{padding:"5px 10px"},children:["Max Hard Points (",P," available)"]})}),(0,i.jsxs)("div",{className:"weapons-grouped-layout",children:[(0,i.jsx)("div",{className:"weapon-group-row",children:s.Rb.filter(e=>e.name.includes("Pulse Laser")).map(n=>{const a=e.find(e=>e.weapon_name===n.name),s=a?.quantity||0;return(0,i.jsxs)("div",{className:"component-item",children:[(0,i.jsx)("div",{className:"component-info",children:(0,i.jsxs)("h4",{children:[n.name,", ",n.mass," tons, ",n.cost," MCr"]})}),(0,i.jsx)("div",{className:"quantity-control",children:(0,i.jsxs)("label",{children:["Quantity:",(0,i.jsx)("input",{type:"number",min:"0",value:s,onChange:e=>_(n,parseInt(e.target.value)||0),style:{width:"60px",marginLeft:"0.5rem"}})]})})]},n.name)})}),(0,i.jsx)("div",{className:"weapon-group-row",children:s.Rb.filter(e=>e.name.includes("Beam Laser")).map(n=>{const a=e.find(e=>e.weapon_name===n.name),s=a?.quantity||0;return(0,i.jsxs)("div",{className:"component-item",children:[(0,i.jsx)("div",{className:"component-info",children:(0,i.jsxs)("h4",{children:[n.name,", ",n.mass," tons, ",n.cost," MCr"]})}),(0,i.jsx)("div",{className:"quantity-control",children:(0,i.jsxs)("label",{children:["Quantity:",(0,i.jsx)("input",{type:"number",min:"0",value:s,onChange:e=>_(n,parseInt(e.target.value)||0),style:{width:"60px",marginLeft:"0.5rem"}})]})})]},n.name)})}),(0,i.jsx)("div",{className:"weapon-group-row",children:s.Rb.filter(e=>e.name.includes("Plasma Beam")).map(n=>{const a=e.find(e=>e.weapon_name===n.name),s=a?.quantity||0;return(0,i.jsxs)("div",{className:"component-item",children:[(0,i.jsx)("div",{className:"component-info",children:(0,i.jsxs)("h4",{children:[n.name,", ",n.mass," tons, ",n.cost," MCr"]})}),(0,i.jsx)("div",{className:"quantity-control",children:(0,i.jsxs)("label",{children:["Quantity:",(0,i.jsx)("input",{type:"number",min:"0",value:s,onChange:e=>_(n,parseInt(e.target.value)||0),style:{width:"60px",marginLeft:"0.5rem"}})]})})]},n.name)})}),(0,i.jsx)("div",{className:"weapon-group-row",children:s.Rb.filter(e=>e.name.includes("Fusion Gun")).map(n=>{const a=e.find(e=>e.weapon_name===n.name),s=a?.quantity||0;return(0,i.jsxs)("div",{className:"component-item",children:[(0,i.jsx)("div",{className:"component-info",children:(0,i.jsxs)("h4",{children:[n.name,", ",n.mass," tons, ",n.cost," MCr"]})}),(0,i.jsx)("div",{className:"quantity-control",children:(0,i.jsxs)("label",{children:["Quantity:",(0,i.jsx)("input",{type:"number",min:"0",value:s,onChange:e=>_(n,parseInt(e.target.value)||0),style:{width:"60px",marginLeft:"0.5rem"}})]})})]},n.name)})}),(0,i.jsx)("div",{className:"weapon-group-row",children:s.Rb.filter(e=>e.name.includes("Missile Launcher")).map(n=>{const a=e.find(e=>e.weapon_name===n.name),s=a?.quantity||0;return(0,i.jsxs)("div",{className:"component-item",children:[(0,i.jsx)("div",{className:"component-info",children:(0,i.jsxs)("h4",{children:[n.name,", ",n.mass," tons, ",n.cost," MCr"]})}),(0,i.jsx)("div",{className:"quantity-control",children:(0,i.jsxs)("label",{children:["Quantity:",(0,i.jsx)("input",{type:"number",min:"0",value:s,onChange:e=>_(n,parseInt(e.target.value)||0),style:{width:"60px",marginLeft:"0.5rem"}})]})})]},n.name)})}),(0,i.jsx)("div",{className:"weapon-group-row",children:s.Rb.filter(e=>"Hard Point"===e.name||"Particle Beam Barbette"===e.name).map(n=>{const a=e.find(e=>e.weapon_name===n.name),s=a?.quantity||0;return(0,i.jsxs)("div",{className:"component-item",children:[(0,i.jsx)("div",{className:"component-info",children:(0,i.jsxs)("h4",{children:[n.name,", ",n.mass," tons, ",n.cost," MCr"]})}),(0,i.jsx)("div",{className:"quantity-control",children:(0,i.jsxs)("label",{children:["Quantity:",(0,i.jsx)("input",{type:"number",min:"0",value:s,onChange:e=>_(n,parseInt(e.target.value)||0),style:{width:"60px",marginLeft:"0.5rem"}})]})})]},n.name)})})]}),(0,i.jsxs)("div",{className:"bay-weapons-section",children:[(0,i.jsx)("h3",{children:"Bay Weapons"}),f<1?(0,i.jsx)("p",{className:"info-message",children:"Bay weapons require a Power Plant with P-1 or higher performance."}):(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)("p",{children:["Available bay weapon slots: ",(0,i.jsx)("strong",{children:b})," (Used: ",g,", Remaining: ",b-g,")",(0,i.jsx)("br",{}),(0,i.jsxs)("small",{children:["Power/Tonnage limit: ",y," (P-",f," × ",n.toLocaleString()," tons ÷ 1,000)",N+g<y&&(0,i.jsxs)("span",{children:[" • Weapon mount limit: ",N+g," ",(0,i.jsx)("strong",{children:"(limiting factor)"})]})]}),(0,i.jsx)("br",{}),(0,i.jsx)("small",{children:"Each bay weapon: 50 tons, 1 weapon mount, 2 gunners"})]}),(0,i.jsx)("div",{className:"weapons-grouped-layout",children:(0,i.jsx)("div",{className:"weapon-group-row",children:(0,s.VZ)(a).map(n=>{const a=j.find(e=>e.weapon_name===n.name),s=a?.quantity||0;return(0,i.jsxs)("div",{className:"component-item",children:[(0,i.jsxs)("div",{className:"component-info",children:[(0,i.jsx)("h4",{children:n.name}),(0,i.jsxs)("p",{children:[n.mass," tons, ",n.cost," MCr",n.minTechLevel?`, TL-${n.minTechLevel}+`:""]}),s>0&&(0,i.jsxs)("p",{children:[(0,i.jsx)("strong",{children:"Total:"})," ",(n.mass*s).toFixed(1)," tons, ",(n.cost*s).toFixed(1)," MCr, ",2*s," gunners"]})]}),(0,i.jsx)("div",{className:"quantity-control",children:(0,i.jsxs)("label",{children:["Quantity:",(0,i.jsx)("input",{type:"number",min:"0",max:b,value:s,onChange:a=>((n,a)=>{const s=Math.max(0,Math.floor(a)),i=j.filter(e=>e.weapon_name!==n.name).reduce((e,n)=>e+n.quantity,0),t=b-i,l=Math.min(s,t);let o=e.filter(e=>e.weapon_name!==n.name);l>0&&o.push({weapon_name:n.name,mass:n.mass,cost:n.cost,quantity:l}),m(o)})(n,parseInt(a.target.value)||0),style:{width:"60px",marginLeft:"0.5rem"}})]})})]},n.name)})})})]})]}),(0,i.jsxs)("div",{className:"spinal-weapon-section",children:[(0,i.jsx)("h3",{children:"Spinal Weapon"}),(()=>{const e=t.find(e=>"power_plant"===e.engine_type),n=e?.performance||0,o=(0,s.kL)(a,n);return n<2?(0,i.jsx)("p",{className:"info-message",children:"Spinal weapons require a Power Plant with P-2 or higher performance."}):0===o.length?(0,i.jsxs)("p",{className:"info-message",children:["No spinal weapons available at Tech Level ",a," with P-",n," power plant."]}):(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("p",{children:"Select a spinal weapon for your ship. Only one spinal weapon can be installed."}),(0,i.jsxs)("div",{className:"form-group",children:[(0,i.jsx)("label",{htmlFor:"spinal-weapon",children:"Spinal Weapon Selection"}),(0,i.jsxs)("select",{id:"spinal-weapon",value:l||"",onChange:e=>c(e.target.value||void 0),children:[(0,i.jsx)("option",{value:"",children:"None"}),o.map(e=>(0,i.jsxs)("option",{value:e.name,children:[e.name," - ",e.mass.toLocaleString(),"t, Damage ",e.damage,", ",e.cost.toLocaleString()," MCr",e.tlBonus?` (${e.tlBonus})`:""]},e.name))]}),l&&(()=>{const e=o.find(e=>e.name===l);return e?(0,i.jsxs)("small",{children:["Mass: ",e.mass.toLocaleString()," tons, Damage: ",e.damage,", Cost: ",e.cost.toLocaleString()," MCr",e.tlBonus&&(0,i.jsxs)("span",{children:[" (",e.tlBonus," bonus applied)"]})]}):null})()]})]})})()]}),M&&(0,i.jsxs)("div",{className:"missile-reloads-section",children:[(0,i.jsx)("h3",{children:"Missile Reloads"}),(0,i.jsx)("p",{children:"Missile launchers detected. You can allocate tonnage for missile reloads."}),(0,i.jsxs)("div",{className:"form-group",children:[(0,i.jsx)("label",{htmlFor:"missile-reloads",children:"Missile Reload Tonnage"}),(0,i.jsx)("input",{id:"missile-reloads",type:"number",min:"0",max:q+o,value:o,onChange:e=>d(Math.max(0,parseInt(e.target.value)||0))}),(0,i.jsxs)("small",{children:["0 - ",q+o," tons available. Cost: ",o," MCr (1 MCr per ton)"]})]}),o>0&&(0,i.jsxs)("div",{className:"missile-summary",children:[(0,i.jsxs)("p",{children:[(0,i.jsx)("strong",{children:"Missile Reloads:"})," ",o," tons (",o," MCr)"]}),(0,i.jsx)("p",{children:(0,i.jsx)("small",{children:"Provides additional missile ammunition for extended operations"})})]})]})]})}}}]);
//# sourceMappingURL=529.bb430b292ab4667be048.js.map