{"version":3,"file":"112.22595273fb291f9a0240.js","mappings":"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","sources":["webpack://starship-designer/./src/components/SummaryPanel.tsx"],"sourcesContent":["import { useState, useEffect } from 'react';\nimport type { ShipDesign, MassCalculation, CostCalculation, StaffRequirements } from '../types/ship';\nimport { COMMS_SENSORS_TYPES, DEFENSE_TYPES, FACILITY_TYPES, CARGO_TYPES, VEHICLE_TYPES, DRONE_TYPES, BERTH_TYPES, getTonnageCode, getNumberOfSections } from '../data/constants';\nimport { databaseService } from '../services/database';\n\ninterface SummaryPanelProps {\n  shipDesign: ShipDesign;\n  mass: MassCalculation;\n  cost: CostCalculation;\n  staff: StaffRequirements;\n  combinePilotNavigator: boolean;\n  noStewards: boolean;\n  onBackToShipSelect?: () => void;\n}\n\nconst SummaryPanel: React.FC<SummaryPanelProps> = ({ shipDesign, mass, cost, staff, combinePilotNavigator, noStewards, onBackToShipSelect }) => {\n  const [saving, setSaving] = useState(false);\n  const [saveMessage, setSaveMessage] = useState<string | null>(null);\n  const [showCsvModal, setShowCsvModal] = useState(false);\n  const [csvData, setCsvData] = useState<string>('');\n  const [showOverwriteDialog, setShowOverwriteDialog] = useState(false);\n  const [pendingShipName, setPendingShipName] = useState<string>('');\n\n\n  const handleSaveDesign = async () => {\n    if (!shipDesign.ship.name.trim()) {\n      setSaveMessage('Please enter a ship name before saving.');\n      setTimeout(() => setSaveMessage(null), 3000);\n      return;\n    }\n\n    try {\n      setSaving(true);\n      setSaveMessage(null);\n      await databaseService.initialize();\n      await databaseService.saveShip(shipDesign);\n      setSaveMessage('Ship design saved successfully!');\n      setTimeout(() => setSaveMessage(null), 3000);\n    } catch (error) {\n      console.error('Error saving ship:', error);\n      const errorMessage = error instanceof Error ? error.message : 'Failed to save ship design. Please try again.';\n      \n      // Check if this is a name collision error\n      if (errorMessage.includes('already exists')) {\n        setPendingShipName(shipDesign.ship.name);\n        setShowOverwriteDialog(true);\n      } else {\n        setSaveMessage(errorMessage);\n        setTimeout(() => setSaveMessage(null), 5000);\n      }\n    } finally {\n      setSaving(false);\n    }\n  };\n\n  const handleOverwriteConfirm = async () => {\n    try {\n      setSaving(true);\n      setShowOverwriteDialog(false);\n      setSaveMessage(null);\n      await databaseService.initialize();\n      await databaseService.saveOrUpdateShipByName(shipDesign);\n      setSaveMessage('Ship design saved successfully!');\n      setTimeout(() => setSaveMessage(null), 3000);\n    } catch (error) {\n      console.error('Error overwriting ship:', error);\n      const errorMessage = error instanceof Error ? error.message : 'Failed to save ship design. Please try again.';\n      setSaveMessage(errorMessage);\n      setTimeout(() => setSaveMessage(null), 5000);\n    } finally {\n      setSaving(false);\n      setPendingShipName('');\n    }\n  };\n\n  const handleOverwriteCancel = () => {\n    setShowOverwriteDialog(false);\n    setPendingShipName('');\n    setSaving(false);\n  };\n\n  const generateCsvData = () => {\n    const lines: string[] = [];\n    \n    // First line: ship info from the title line\n    const tonnageCode = getTonnageCode(shipDesign.ship.tonnage);\n    const sections = getNumberOfSections(shipDesign.ship.tonnage);\n    const hullInfo = tonnageCode && sections ? ` (hull code ${tonnageCode}, ${sections} sections)` : tonnageCode ? ` (${tonnageCode})` : '';\n    const shipInfoLine = `${shipDesign.ship.name}, ${shipDesign.ship.configuration} configuration, ${shipDesign.ship.tonnage} tons${hullInfo}, Tech Level ${shipDesign.ship.tech_level}`;\n    lines.push(shipInfoLine);\n    \n    // Second line: CSV headers\n    lines.push('Category,Item,Mass,Cost');\n    \n    // Generate all table rows\n    const allRows: { category: string; item: string; mass: number; cost: number }[] = [];\n    \n    // Engines\n    const validEngines = shipDesign.engines.filter(engine => \n      !(engine.engine_type === 'maneuver_drive' && engine.performance === 0)\n    );\n    validEngines.forEach((engine, index) => {\n      const engineName = engine.engine_type === 'power_plant' ? 'Power Plant' :\n                       engine.engine_type === 'jump_drive' ? 'Jump Drive' :\n                       'Maneuver Drive';\n      const performanceCode = engine.engine_type === 'power_plant' ? 'P' :\n                            engine.engine_type === 'jump_drive' ? 'J' :\n                            'M';\n      \n      allRows.push({\n        category: index === 0 ? 'Engines' : '',\n        item: `${engineName} ${performanceCode}-${engine.performance}`,\n        mass: engine.mass,\n        cost: engine.cost\n      });\n    });\n    \n    // Fittings\n    let fittingRowIndex = 0;\n    const hasBridge = shipDesign.fittings.some(f => f.fitting_type === 'bridge');\n    const hasHalfBridge = shipDesign.fittings.some(f => f.fitting_type === 'half_bridge');\n    const launchTubes = shipDesign.fittings.filter(f => f.fitting_type === 'launch_tube');\n    const commsSensors = shipDesign.fittings.find(f => f.fitting_type === 'comms_sensors');\n    \n    if (hasBridge || hasHalfBridge) {\n      const bridgeType = hasBridge ? 'Bridge' : 'Half Bridge';\n      const bridgeData = shipDesign.fittings.find(f => f.fitting_type === 'bridge' || f.fitting_type === 'half_bridge');\n      if (bridgeData) {\n        allRows.push({\n          category: fittingRowIndex === 0 ? 'Fittings' : '',\n          item: bridgeType,\n          mass: bridgeData.mass,\n          cost: bridgeData.cost\n        });\n        fittingRowIndex++;\n      }\n    }\n    \n    launchTubes.forEach((tube) => {\n      allRows.push({\n        category: fittingRowIndex === 0 ? 'Fittings' : '',\n        item: `Launch Tube (${tube.launch_vehicle_mass || 1} ton vehicle)`,\n        mass: tube.mass,\n        cost: tube.cost\n      });\n      fittingRowIndex++;\n    });\n    \n    if (commsSensors) {\n      const sensorType = COMMS_SENSORS_TYPES.find(t => t.type === commsSensors.comms_sensors_type);\n      allRows.push({\n        category: fittingRowIndex === 0 ? 'Fittings' : '',\n        item: `${sensorType?.name || 'Standard'} Comms & Sensors`,\n        mass: commsSensors.mass,\n        cost: commsSensors.cost\n      });\n    }\n    \n    // Weapons\n    const activeWeapons = shipDesign.weapons.filter(weapon => weapon.quantity > 0);\n    activeWeapons.forEach((weapon, index) => {\n      const weaponDisplay = weapon.quantity === 1 ? weapon.weapon_name : `${weapon.weapon_name} (x${weapon.quantity})`;\n      allRows.push({\n        category: index === 0 ? 'Weapons' : '',\n        item: weaponDisplay,\n        mass: weapon.mass * weapon.quantity,\n        cost: weapon.cost * weapon.quantity\n      });\n    });\n    \n    // Defenses\n    let defenseRowIndex = 0;\n    const activeDefenses = shipDesign.defenses.filter(defense => defense.quantity > 0);\n    const hasSand = shipDesign.ship.sand_reloads > 0;\n    \n    if (activeDefenses.length > 0 || hasSand) {\n      activeDefenses.forEach((defense) => {\n        const defenseType = DEFENSE_TYPES.find(dt => dt.type === defense.defense_type);\n        const defenseName = defenseType?.name || defense.defense_type;\n        const defenseDisplay = defense.quantity === 1 ? defenseName : `${defenseName} (x${defense.quantity})`;\n        \n        allRows.push({\n          category: defenseRowIndex === 0 ? 'Defenses' : '',\n          item: defenseDisplay,\n          mass: defense.mass * defense.quantity,\n          cost: defense.cost * defense.quantity\n        });\n        defenseRowIndex++;\n      });\n      \n      if (hasSand) {\n        allRows.push({\n          category: defenseRowIndex === 0 ? 'Defenses' : '',\n          item: 'Sand',\n          mass: shipDesign.ship.sand_reloads,\n          cost: 0\n        });\n      }\n    }\n    \n    // Berths\n    const activeBerths = shipDesign.berths.filter(berth => berth.quantity > 0);\n    activeBerths.forEach((berth, index) => {\n      const berthType = BERTH_TYPES.find(bt => bt.type === berth.berth_type);\n      const berthName = berthType?.name || berth.berth_type;\n      const berthDisplay = berth.quantity === 1 ? berthName : `${berthName} (x${berth.quantity})`;\n      \n      allRows.push({\n        category: index === 0 ? 'Berths' : '',\n        item: berthDisplay,\n        mass: berth.mass * berth.quantity,\n        cost: berth.cost * berth.quantity\n      });\n    });\n    \n    // Rec/Health\n    const activeFacilities = shipDesign.facilities.filter(facility => facility.quantity > 0);\n    if (activeFacilities.length > 0) {\n      const sortedFacilities = activeFacilities.sort((a, b) => {\n        if (a.facility_type === 'commissary') return -1;\n        if (b.facility_type === 'commissary') return 1;\n        return 0;\n      });\n      \n      sortedFacilities.forEach((facility, index) => {\n        const facilityType = FACILITY_TYPES.find(ft => ft.type === facility.facility_type);\n        const facilityName = facilityType?.name || facility.facility_type;\n        const facilityDisplay = facility.quantity === 1 ? facilityName : `${facilityName} (x${facility.quantity})`;\n        \n        allRows.push({\n          category: index === 0 ? 'Rec/Health' : '',\n          item: facilityDisplay,\n          mass: facility.mass * facility.quantity,\n          cost: facility.cost * facility.quantity\n        });\n      });\n    }\n    \n    // Cargo\n    const activeCargo = shipDesign.cargo.filter(cargo => cargo.tonnage > 0);\n    activeCargo.forEach((cargo, index) => {\n      const cargoType = CARGO_TYPES.find(ct => ct.type === cargo.cargo_type);\n      const cargoName = cargoType?.name || cargo.cargo_type;\n      \n      allRows.push({\n        category: index === 0 ? 'Cargo' : '',\n        item: cargoName,\n        mass: cargo.tonnage,\n        cost: cargo.cost\n      });\n    });\n    \n    // Vehicles\n    const activeVehicles = shipDesign.vehicles.filter(vehicle => vehicle.quantity > 0);\n    activeVehicles.forEach((vehicle, index) => {\n      const vehicleType = VEHICLE_TYPES.find(vt => vt.type === vehicle.vehicle_type);\n      let vehicleName = vehicleType?.name || vehicle.vehicle_type;\n      vehicleName = vehicleName.replace(/\\b\\d+(\\.\\d+)?\\s+ton\\s+/gi, '');\n      const vehicleDisplay = vehicle.quantity === 1 ? vehicleName : `${vehicleName} (x${vehicle.quantity})`;\n      \n      allRows.push({\n        category: index === 0 ? 'Vehicles' : '',\n        item: vehicleDisplay,\n        mass: vehicle.mass * vehicle.quantity,\n        cost: vehicle.cost * vehicle.quantity\n      });\n    });\n    \n    // Drones\n    const activeDrones = shipDesign.drones.filter(drone => drone.quantity > 0);\n    activeDrones.forEach((drone, index) => {\n      const droneType = DRONE_TYPES.find(dt => dt.type === drone.drone_type);\n      let droneName = droneType?.name || drone.drone_type;\n      droneName = droneName.replace(/\\b\\d+(\\.\\d+)?\\s+ton\\s+/gi, '');\n      const droneDisplay = drone.quantity === 1 ? droneName : `${droneName} (x${drone.quantity})`;\n      \n      allRows.push({\n        category: index === 0 ? 'Drones' : '',\n        item: droneDisplay,\n        mass: drone.mass * drone.quantity,\n        cost: drone.cost * drone.quantity\n      });\n    });\n    \n    // Add all rows to CSV\n    allRows.forEach(row => {\n      lines.push(`${row.category},${row.item},${row.mass.toFixed(1)},${row.cost.toFixed(2)}`);\n    });\n    \n    // Add totals row\n    lines.push(`Total,,${mass.used.toFixed(1)},${cost.total.toFixed(2)}`);\n    \n    return lines.join('\\n');\n  };\n\n  const handleCsvExport = () => {\n    const csvContent = generateCsvData();\n    setCsvData(csvContent);\n    setShowCsvModal(true);\n  };\n\n  const handlePrint = () => {\n    const printWindow = window.open('', '_blank');\n    if (!printWindow) return;\n\n    const tonnageCode = getTonnageCode(shipDesign.ship.tonnage);\n    const sections = getNumberOfSections(shipDesign.ship.tonnage);\n    const hullInfo = tonnageCode && sections ? ` (hull code ${tonnageCode}, ${sections} sections)` : tonnageCode ? ` (${tonnageCode})` : '';\n    const shipTitle = `${shipDesign.ship.name}, ${shipDesign.ship.configuration} configuration, ${shipDesign.ship.tonnage} tons${hullInfo}, Tech Level ${shipDesign.ship.tech_level}`;\n    \n    // Generate the same table structure as displayed\n    const printContent = `\n      <!DOCTYPE html>\n      <html>\n        <head>\n          <title>Ship Design - ${shipDesign.ship.name}</title>\n          <style>\n            body { font-family: Arial, sans-serif; margin: 20px; }\n            .ship-title { font-size: 18px; font-weight: bold; margin-bottom: 20px; }\n            table { width: 100%; border-collapse: collapse; margin-bottom: 20px; }\n            th, td { padding: 8px 12px; border: 1px solid #ccc; text-align: left; }\n            th { background-color: #f0f0f0; font-weight: bold; }\n            .category-cell { font-weight: bold; }\n            .totals-row { border-top: 2px solid #000; font-weight: bold; }\n            .totals-row td { background-color: #f8f8f8; }\n            @media print {\n              body { margin: 0; }\n              .ship-title { page-break-after: avoid; }\n              table { page-break-inside: avoid; }\n            }\n          </style>\n        </head>\n        <body>\n          <div class=\"ship-title\">${shipTitle}</div>\n          <table>\n            <thead>\n              <tr>\n                <th>Category</th>\n                <th>Item</th>\n                <th>Mass</th>\n                <th>Cost</th>\n              </tr>\n            </thead>\n            <tbody>\n              ${generateTableRows()}\n            </tbody>\n          </table>\n        </body>\n      </html>\n    `;\n    \n    printWindow.document.write(printContent);\n    printWindow.document.close();\n    printWindow.focus();\n    printWindow.print();\n    printWindow.close();\n  };\n\n  const generateTableRows = (): string => {\n    const rows: string[] = [];\n    \n    // Helper function to add a row\n    const addRow = (category: string, item: string, mass: number, cost: number) => {\n      const categoryDisplay = category ? `<td class=\"category-cell\">${category}</td>` : '<td></td>';\n      rows.push(`\n        <tr>\n          ${categoryDisplay}\n          <td>${item}</td>\n          <td>${mass.toFixed(1)} tons</td>\n          <td>${cost.toFixed(2)} MCr</td>\n        </tr>\n      `);\n    };\n\n    // Engines\n    const validEngines = shipDesign.engines.filter(engine => \n      !(engine.engine_type === 'maneuver_drive' && engine.performance === 0)\n    );\n    validEngines.forEach((engine, index) => {\n      const engineName = engine.engine_type === 'power_plant' ? 'Power Plant' :\n                       engine.engine_type === 'jump_drive' ? 'Jump Drive' :\n                       'Maneuver Drive';\n      const performanceCode = engine.engine_type === 'power_plant' ? 'P' :\n                            engine.engine_type === 'jump_drive' ? 'J' :\n                            'M';\n      \n      addRow(\n        index === 0 ? 'Engines' : '',\n        `${engineName} ${performanceCode}-${engine.performance}`,\n        engine.mass,\n        engine.cost\n      );\n    });\n\n    // Fittings\n    let fittingRowIndex = 0;\n    const hasBridge = shipDesign.fittings.some(f => f.fitting_type === 'bridge');\n    const hasHalfBridge = shipDesign.fittings.some(f => f.fitting_type === 'half_bridge');\n    const launchTubes = shipDesign.fittings.filter(f => f.fitting_type === 'launch_tube');\n    const commsSensors = shipDesign.fittings.find(f => f.fitting_type === 'comms_sensors');\n    \n    if (hasBridge || hasHalfBridge) {\n      const bridgeType = hasBridge ? 'Bridge' : 'Half Bridge';\n      const bridgeData = shipDesign.fittings.find(f => f.fitting_type === 'bridge' || f.fitting_type === 'half_bridge');\n      if (bridgeData) {\n        addRow(\n          fittingRowIndex === 0 ? 'Fittings' : '',\n          bridgeType,\n          bridgeData.mass,\n          bridgeData.cost\n        );\n        fittingRowIndex++;\n      }\n    }\n    \n    launchTubes.forEach((tube) => {\n      addRow(\n        fittingRowIndex === 0 ? 'Fittings' : '',\n        `Launch Tube (${tube.launch_vehicle_mass || 1} ton vehicle)`,\n        tube.mass,\n        tube.cost\n      );\n      fittingRowIndex++;\n    });\n    \n    if (commsSensors) {\n      const sensorType = COMMS_SENSORS_TYPES.find(t => t.type === commsSensors.comms_sensors_type);\n      addRow(\n        fittingRowIndex === 0 ? 'Fittings' : '',\n        `${sensorType?.name || 'Standard'} Comms & Sensors`,\n        commsSensors.mass,\n        commsSensors.cost\n      );\n    }\n\n    // Weapons\n    const activeWeapons = shipDesign.weapons.filter(weapon => weapon.quantity > 0);\n    activeWeapons.forEach((weapon, index) => {\n      const weaponDisplay = weapon.quantity === 1 ? weapon.weapon_name : `${weapon.weapon_name} (x${weapon.quantity})`;\n      addRow(\n        index === 0 ? 'Weapons' : '',\n        weaponDisplay,\n        weapon.mass * weapon.quantity,\n        weapon.cost * weapon.quantity\n      );\n    });\n\n    // Defenses\n    let defenseRowIndex = 0;\n    const activeDefenses = shipDesign.defenses.filter(defense => defense.quantity > 0);\n    const hasSand = shipDesign.ship.sand_reloads > 0;\n    \n    if (activeDefenses.length > 0 || hasSand) {\n      activeDefenses.forEach((defense) => {\n        const defenseType = DEFENSE_TYPES.find(dt => dt.type === defense.defense_type);\n        const defenseName = defenseType?.name || defense.defense_type;\n        const defenseDisplay = defense.quantity === 1 ? defenseName : `${defenseName} (x${defense.quantity})`;\n        \n        addRow(\n          defenseRowIndex === 0 ? 'Defenses' : '',\n          defenseDisplay,\n          defense.mass * defense.quantity,\n          defense.cost * defense.quantity\n        );\n        defenseRowIndex++;\n      });\n      \n      if (hasSand) {\n        addRow(\n          defenseRowIndex === 0 ? 'Defenses' : '',\n          'Sand',\n          shipDesign.ship.sand_reloads,\n          0\n        );\n      }\n    }\n\n    // Berths\n    const activeBerths = shipDesign.berths.filter(berth => berth.quantity > 0);\n    activeBerths.forEach((berth, index) => {\n      const berthType = BERTH_TYPES.find(bt => bt.type === berth.berth_type);\n      const berthName = berthType?.name || berth.berth_type;\n      const berthDisplay = berth.quantity === 1 ? berthName : `${berthName} (x${berth.quantity})`;\n      \n      addRow(\n        index === 0 ? 'Berths' : '',\n        berthDisplay,\n        berth.mass * berth.quantity,\n        berth.cost * berth.quantity\n      );\n    });\n\n    // Rec/Health\n    const activeFacilities = shipDesign.facilities.filter(facility => facility.quantity > 0);\n    if (activeFacilities.length > 0) {\n      const sortedFacilities = activeFacilities.sort((a, b) => {\n        if (a.facility_type === 'commissary') return -1;\n        if (b.facility_type === 'commissary') return 1;\n        return 0;\n      });\n      \n      sortedFacilities.forEach((facility, index) => {\n        const facilityType = FACILITY_TYPES.find(ft => ft.type === facility.facility_type);\n        const facilityName = facilityType?.name || facility.facility_type;\n        const facilityDisplay = facility.quantity === 1 ? facilityName : `${facilityName} (x${facility.quantity})`;\n        \n        addRow(\n          index === 0 ? 'Rec/Health' : '',\n          facilityDisplay,\n          facility.mass * facility.quantity,\n          facility.cost * facility.quantity\n        );\n      });\n    }\n\n    // Cargo\n    const activeCargo = shipDesign.cargo.filter(cargo => cargo.tonnage > 0);\n    activeCargo.forEach((cargo, index) => {\n      const cargoType = CARGO_TYPES.find(ct => ct.type === cargo.cargo_type);\n      const cargoName = cargoType?.name || cargo.cargo_type;\n      \n      addRow(\n        index === 0 ? 'Cargo' : '',\n        cargoName,\n        cargo.tonnage,\n        cargo.cost\n      );\n    });\n\n    // Vehicles\n    const activeVehicles = shipDesign.vehicles.filter(vehicle => vehicle.quantity > 0);\n    activeVehicles.forEach((vehicle, index) => {\n      const vehicleType = VEHICLE_TYPES.find(vt => vt.type === vehicle.vehicle_type);\n      let vehicleName = vehicleType?.name || vehicle.vehicle_type;\n      vehicleName = vehicleName.replace(/\\b\\d+(\\.\\d+)?\\s+ton\\s+/gi, '');\n      const vehicleDisplay = vehicle.quantity === 1 ? vehicleName : `${vehicleName} (x${vehicle.quantity})`;\n      \n      addRow(\n        index === 0 ? 'Vehicles' : '',\n        vehicleDisplay,\n        vehicle.mass * vehicle.quantity,\n        vehicle.cost * vehicle.quantity\n      );\n    });\n\n    // Drones\n    const activeDrones = shipDesign.drones.filter(drone => drone.quantity > 0);\n    activeDrones.forEach((drone, index) => {\n      const droneType = DRONE_TYPES.find(dt => dt.type === drone.drone_type);\n      let droneName = droneType?.name || drone.drone_type;\n      droneName = droneName.replace(/\\b\\d+(\\.\\d+)?\\s+ton\\s+/gi, '');\n      const droneDisplay = drone.quantity === 1 ? droneName : `${droneName} (x${drone.quantity})`;\n      \n      addRow(\n        index === 0 ? 'Drones' : '',\n        droneDisplay,\n        drone.mass * drone.quantity,\n        drone.cost * drone.quantity\n      );\n    });\n\n    // Totals row\n    rows.push(`\n      <tr class=\"totals-row\">\n        <td><strong>Total</strong></td>\n        <td></td>\n        <td><strong>${mass.used.toFixed(1)} tons</strong></td>\n        <td><strong>${cost.total.toFixed(2)} MCr</strong></td>\n      </tr>\n    `);\n\n    return rows.join('');\n  };\n\n  // Add keyboard event listener for Ctrl+P\n  useEffect(() => {\n    const handleKeyDown = (event: KeyboardEvent) => {\n      if (event.ctrlKey && event.key === 'p') {\n        event.preventDefault();\n        handlePrint();\n      }\n    };\n\n    document.addEventListener('keydown', handleKeyDown);\n    return () => {\n      document.removeEventListener('keydown', handleKeyDown);\n    };\n  }, [shipDesign, mass, cost]);\n\n  const tonnageCodeDisplay = getTonnageCode(shipDesign.ship.tonnage);\n  const sectionsDisplay = getNumberOfSections(shipDesign.ship.tonnage);\n  const hullInfoDisplay = tonnageCodeDisplay && sectionsDisplay\n    ? ` (hull code ${tonnageCodeDisplay}, ${sectionsDisplay} sections)`\n    : tonnageCodeDisplay ? ` (${tonnageCodeDisplay})` : '';\n\n  return (\n    <div className=\"panel-content\">\n      <div className=\"ship-title-line\">\n        <h3>{shipDesign.ship.name}, {shipDesign.ship.configuration} configuration, {shipDesign.ship.tonnage.toLocaleString()} tons{hullInfoDisplay}, Tech Level {shipDesign.ship.tech_level}</h3>\n      </div>\n\n      <div className=\"ship-components-table\">\n        <table>\n          <thead>\n            <tr>\n              <th>Category</th>\n              <th>Item</th>\n              <th>Mass</th>\n              <th>Cost</th>\n            </tr>\n          </thead>\n          <tbody>\n            {/* Engines */}\n            {(() => {\n              // Filter out M-0 maneuver drives and create engine rows\n              const validEngines = shipDesign.engines.filter(engine => \n                !(engine.engine_type === 'maneuver_drive' && engine.performance === 0)\n              );\n              \n              return validEngines.map((engine, index) => {\n                const engineName = engine.engine_type === 'power_plant' ? 'Power Plant' :\n                                 engine.engine_type === 'jump_drive' ? 'Jump Drive' :\n                                 'Maneuver Drive';\n                const performanceCode = engine.engine_type === 'power_plant' ? 'P' :\n                                      engine.engine_type === 'jump_drive' ? 'J' :\n                                      'M';\n                \n                return (\n                  <tr key={engine.engine_type}>\n                    <td>{index === 0 ? 'Engines' : ''}</td>\n                    <td>{engineName} {performanceCode}-{engine.performance}</td>\n                    <td>{engine.mass.toFixed(1)} tons</td>\n                    <td>{engine.cost.toFixed(2)} MCr</td>\n                  </tr>\n                );\n              });\n            })()}\n            \n            {/* Fittings */}\n            {(() => {\n              const rows: React.ReactElement[] = [];\n              let fittingRowIndex = 0;\n              const hasBridge = shipDesign.fittings.some(f => f.fitting_type === 'bridge');\n              const hasHalfBridge = shipDesign.fittings.some(f => f.fitting_type === 'half_bridge');\n              const launchTubes = shipDesign.fittings.filter(f => f.fitting_type === 'launch_tube');\n              const commsSensors = shipDesign.fittings.find(f => f.fitting_type === 'comms_sensors');\n              \n              // Bridge (always show if present)\n              if (hasBridge || hasHalfBridge) {\n                const bridgeType = hasBridge ? 'Bridge' : 'Half Bridge';\n                const bridgeData = shipDesign.fittings.find(f => f.fitting_type === 'bridge' || f.fitting_type === 'half_bridge');\n                if (bridgeData) {\n                  rows.push(\n                    <tr key=\"bridge\">\n                      <td>{fittingRowIndex === 0 ? 'Fittings' : ''}</td>\n                      <td>{bridgeType}</td>\n                      <td>{bridgeData.mass.toFixed(1)} tons</td>\n                      <td>{bridgeData.cost.toFixed(2)} MCr</td>\n                    </tr>\n                  );\n                  fittingRowIndex++;\n                }\n              }\n              \n              // Launch Tubes\n              launchTubes.forEach((tube, index) => {\n                rows.push(\n                  <tr key={`launch_tube_${index}`}>\n                    <td>{fittingRowIndex === 0 ? 'Fittings' : ''}</td>\n                    <td>Launch Tube ({tube.launch_vehicle_mass || 1} ton vehicle)</td>\n                    <td>{tube.mass.toFixed(1)} tons</td>\n                    <td>{tube.cost.toFixed(2)} MCr</td>\n                  </tr>\n                );\n                fittingRowIndex++;\n              });\n              \n              // Comms & Sensors\n              if (commsSensors) {\n                const sensorType = COMMS_SENSORS_TYPES.find(t => t.type === commsSensors.comms_sensors_type);\n                rows.push(\n                  <tr key=\"comms_sensors\">\n                    <td>{fittingRowIndex === 0 ? 'Fittings' : ''}</td>\n                    <td>{sensorType?.name || 'Standard'} Comms & Sensors</td>\n                    <td>{commsSensors.mass.toFixed(1)} tons</td>\n                    <td>{commsSensors.cost.toFixed(2)} MCr</td>\n                  </tr>\n                );\n                fittingRowIndex++;\n              }\n              \n              return rows;\n            })()}\n            \n            {/* Weapons */}\n            {(() => {\n              const rows: React.ReactElement[] = [];\n              let weaponRowIndex = 0;\n              const activeWeapons = shipDesign.weapons.filter(weapon => weapon.quantity > 0);\n              \n              // Only add weapons section if there are active weapons\n              if (activeWeapons.length > 0) {\n                activeWeapons.forEach(weapon => {\n                  const weaponDisplay = weapon.quantity === 1 ? weapon.weapon_name : `${weapon.weapon_name} (x${weapon.quantity})`;\n                  \n                  rows.push(\n                    <tr key={`weapon_${weapon.weapon_name}`}>\n                      <td>{weaponRowIndex === 0 ? 'Weapons' : ''}</td>\n                      <td>{weaponDisplay}</td>\n                      <td>{(weapon.mass * weapon.quantity).toFixed(1)} tons</td>\n                      <td>{(weapon.cost * weapon.quantity).toFixed(2)} MCr</td>\n                    </tr>\n                  );\n                  weaponRowIndex++;\n                });\n              }\n              \n              return rows;\n            })()}\n            \n            {/* Defenses */}\n            {(() => {\n              const rows: React.ReactElement[] = [];\n              let defenseRowIndex = 0;\n              const activeDefenses = shipDesign.defenses.filter(defense => defense.quantity > 0);\n              const hasSand = shipDesign.ship.sand_reloads > 0;\n              \n              // Only add defenses section if there are active defenses or sand\n              if (activeDefenses.length > 0 || hasSand) {\n                activeDefenses.forEach(defense => {\n                  const defenseType = DEFENSE_TYPES.find(dt => dt.type === defense.defense_type);\n                  const defenseName = defenseType?.name || defense.defense_type;\n                  const defenseDisplay = defense.quantity === 1 ? defenseName : `${defenseName} (x${defense.quantity})`;\n                  \n                  rows.push(\n                    <tr key={`defense_${defense.defense_type}`}>\n                      <td>{defenseRowIndex === 0 ? 'Defenses' : ''}</td>\n                      <td>{defenseDisplay}</td>\n                      <td>{(defense.mass * defense.quantity).toFixed(1)} tons</td>\n                      <td>{(defense.cost * defense.quantity).toFixed(2)} MCr</td>\n                    </tr>\n                  );\n                  defenseRowIndex++;\n                });\n                \n                // Add sand if any is configured\n                if (hasSand) {\n                  rows.push(\n                    <tr key=\"defense_sand\">\n                      <td>{defenseRowIndex === 0 ? 'Defenses' : ''}</td>\n                      <td>Sand</td>\n                      <td>{shipDesign.ship.sand_reloads.toFixed(1)} tons</td>\n                      <td></td>\n                    </tr>\n                  );\n                  defenseRowIndex++;\n                }\n              }\n              \n              return rows;\n            })()}\n            \n            {/* Berths */}\n            {(() => {\n              const rows: React.ReactElement[] = [];\n              let berthRowIndex = 0;\n              const activeBerths = shipDesign.berths.filter(berth => berth.quantity > 0);\n              \n              // Only add Berths section if there are active berths\n              if (activeBerths.length > 0) {\n                activeBerths.forEach(berth => {\n                  const berthType = BERTH_TYPES.find(bt => bt.type === berth.berth_type);\n                  const berthName = berthType?.name || berth.berth_type;\n                  const berthDisplay = berth.quantity === 1 ? berthName : `${berthName} (x${berth.quantity})`;\n                  \n                  rows.push(\n                    <tr key={`berth_${berth.berth_type}`}>\n                      <td>{berthRowIndex === 0 ? 'Berths' : ''}</td>\n                      <td>{berthDisplay}</td>\n                      <td>{(berth.mass * berth.quantity).toFixed(1)} tons</td>\n                      <td>{(berth.cost * berth.quantity).toFixed(2)} MCr</td>\n                    </tr>\n                  );\n                  berthRowIndex++;\n                });\n              }\n              \n              return rows;\n            })()}\n            \n            {/* Rec/Health */}\n            {(() => {\n              const rows: React.ReactElement[] = [];\n              let facilityRowIndex = 0;\n              const activeFacilities = shipDesign.facilities.filter(facility => facility.quantity > 0);\n              \n              // Only add Rec/Health section if there are active facilities\n              if (activeFacilities.length > 0) {\n                // Sort facilities to show Commissary first, then the rest\n                const sortedFacilities = activeFacilities.sort((a, b) => {\n                  if (a.facility_type === 'commissary') return -1;\n                  if (b.facility_type === 'commissary') return 1;\n                  return 0;\n                });\n                \n                sortedFacilities.forEach(facility => {\n                  const facilityType = FACILITY_TYPES.find(ft => ft.type === facility.facility_type);\n                  const facilityName = facilityType?.name || facility.facility_type;\n                  const facilityDisplay = facility.quantity === 1 ? facilityName : `${facilityName} (x${facility.quantity})`;\n                  \n                  rows.push(\n                    <tr key={`facility_${facility.facility_type}`}>\n                      <td>{facilityRowIndex === 0 ? 'Rec/Health' : ''}</td>\n                      <td>{facilityDisplay}</td>\n                      <td>{(facility.mass * facility.quantity).toFixed(1)} tons</td>\n                      <td>{(facility.cost * facility.quantity).toFixed(2)} MCr</td>\n                    </tr>\n                  );\n                  facilityRowIndex++;\n                });\n              }\n              \n              return rows;\n            })()}\n            \n            {/* Cargo */}\n            {(() => {\n              const rows: React.ReactElement[] = [];\n              let cargoRowIndex = 0;\n              const activeCargo = shipDesign.cargo.filter(cargo => cargo.tonnage > 0);\n              \n              // Only add Cargo section if there are active cargo items\n              if (activeCargo.length > 0) {\n                activeCargo.forEach(cargo => {\n                  const cargoType = CARGO_TYPES.find(ct => ct.type === cargo.cargo_type);\n                  const cargoName = cargoType?.name || cargo.cargo_type;\n                  \n                  rows.push(\n                    <tr key={`cargo_${cargo.cargo_type}`}>\n                      <td>{cargoRowIndex === 0 ? 'Cargo' : ''}</td>\n                      <td>{cargoName}</td>\n                      <td>{cargo.tonnage.toFixed(1)} tons</td>\n                      <td>{cargo.cost.toFixed(2)} MCr</td>\n                    </tr>\n                  );\n                  cargoRowIndex++;\n                });\n              }\n              \n              return rows;\n            })()}\n            \n            {/* Vehicles */}\n            {(() => {\n              const rows: React.ReactElement[] = [];\n              let vehicleRowIndex = 0;\n              const activeVehicles = shipDesign.vehicles.filter(vehicle => vehicle.quantity > 0);\n              \n              // Only add Vehicles section if there are active vehicles\n              if (activeVehicles.length > 0) {\n                activeVehicles.forEach(vehicle => {\n                  const vehicleType = VEHICLE_TYPES.find(vt => vt.type === vehicle.vehicle_type);\n                  let vehicleName = vehicleType?.name || vehicle.vehicle_type;\n                  \n                  // Remove tonnage information from vehicle names (e.g., \"4 ton\", \"65 ton\", etc.)\n                  vehicleName = vehicleName.replace(/\\b\\d+(\\.\\d+)?\\s+ton\\s+/gi, '');\n                  \n                  const vehicleDisplay = vehicle.quantity === 1 ? vehicleName : `${vehicleName} (x${vehicle.quantity})`;\n                  \n                  rows.push(\n                    <tr key={`vehicle_${vehicle.vehicle_type}`}>\n                      <td>{vehicleRowIndex === 0 ? 'Vehicles' : ''}</td>\n                      <td>{vehicleDisplay}</td>\n                      <td>{(vehicle.mass * vehicle.quantity).toFixed(1)} tons</td>\n                      <td>{(vehicle.cost * vehicle.quantity).toFixed(2)} MCr</td>\n                    </tr>\n                  );\n                  vehicleRowIndex++;\n                });\n              }\n              \n              return rows;\n            })()}\n            \n            {/* Drones */}\n            {(() => {\n              const rows: React.ReactElement[] = [];\n              let droneRowIndex = 0;\n              const activeDrones = shipDesign.drones.filter(drone => drone.quantity > 0);\n              \n              // Only add Drones section if there are active drones\n              if (activeDrones.length > 0) {\n                activeDrones.forEach(drone => {\n                  const droneType = DRONE_TYPES.find(dt => dt.type === drone.drone_type);\n                  let droneName = droneType?.name || drone.drone_type;\n                  \n                  // Remove tonnage information from drone names (e.g., \"0.5 ton\", \"1.0 ton\", etc.)\n                  droneName = droneName.replace(/\\b\\d+(\\.\\d+)?\\s+ton\\s+/gi, '');\n                  \n                  const droneDisplay = drone.quantity === 1 ? droneName : `${droneName} (x${drone.quantity})`;\n                  \n                  rows.push(\n                    <tr key={`drone_${drone.drone_type}`}>\n                      <td>{droneRowIndex === 0 ? 'Drones' : ''}</td>\n                      <td>{droneDisplay}</td>\n                      <td>{(drone.mass * drone.quantity).toFixed(1)} tons</td>\n                      <td>{(drone.cost * drone.quantity).toFixed(2)} MCr</td>\n                    </tr>\n                  );\n                  droneRowIndex++;\n                });\n              }\n              \n              return rows;\n            })()}\n            \n            {/* Totals Row */}\n            <tr>\n              <td></td>\n              <td><strong>Total</strong></td>\n              <td><strong>{mass.used.toFixed(1)} tons</strong></td>\n              <td><strong>{cost.total.toFixed(2)} MCr</strong></td>\n            </tr>\n          </tbody>\n        </table>\n      </div>\n      \n      <div className=\"summary-section\">\n        <h4>Crew</h4>\n        {combinePilotNavigator ? (\n          <p><strong>Pilot/Navigator:</strong> 1</p>\n        ) : (\n          <>\n            <p><strong>Pilot:</strong> {staff.pilot}</p>\n            <p><strong>Navigator:</strong> {staff.navigator}</p>\n          </>\n        )}\n        <p><strong>Engineers:</strong> {staff.engineers}</p>\n        {staff.gunners > 0 && <p><strong>Gunners:</strong> {staff.gunners}</p>}\n        {staff.service > 0 && <p><strong>Service Staff:</strong> {staff.service}</p>}\n        <p><strong>Stewards:</strong> {noStewards ? 0 : staff.stewards}</p>\n        {staff.nurses > 0 && <p><strong>Nurses:</strong> {staff.nurses}</p>}\n        {staff.surgeons > 0 && <p><strong>Surgeons:</strong> {staff.surgeons}</p>}\n        {staff.techs > 0 && <p><strong>Medical Techs:</strong> {staff.techs}</p>}\n        <p><strong>Total:</strong> {\n          combinePilotNavigator && noStewards\n            ? staff.total - 1 - staff.stewards\n            : combinePilotNavigator \n              ? staff.total - 1 \n              : noStewards \n                ? staff.total - staff.stewards\n                : staff.total\n        }</p>\n      </div>\n\n      {saveMessage && (\n        <div className={`save-message ${saveMessage.includes('successfully') ? 'success' : 'error'}`}>\n          {saveMessage}\n        </div>\n      )}\n\n      <div className=\"summary-actions\">\n        <button \n          className=\"save-btn\" \n          onClick={handleSaveDesign} \n          disabled={saving}\n        >\n          {saving ? 'Saving...' : 'Save Design'}\n        </button>\n        <button className=\"load-btn\" onClick={handleCsvExport}>\n          CSV\n        </button>\n        {onBackToShipSelect && (\n          <button className=\"load-btn\" onClick={onBackToShipSelect}>\n            Load Different Ship\n          </button>\n        )}\n      </div>\n\n      {/* CSV Modal */}\n      {showCsvModal && (\n        <div className=\"ship-name-conflict-dialog\">\n          <div className=\"conflict-dialog-content\">\n            <h3>CSV Export</h3>\n            <textarea\n              value={csvData}\n              readOnly\n              style={{\n                width: '100%',\n                height: '400px',\n                fontFamily: 'monospace',\n                fontSize: '12px',\n                padding: '10px',\n                border: '1px solid #ccc',\n                borderRadius: '4px'\n              }}\n            />\n            <div className=\"conflict-dialog-actions\">\n              <button \n                className=\"change-name-btn\" \n                onClick={() => setShowCsvModal(false)}\n              >\n                Close\n              </button>\n            </div>\n          </div>\n        </div>\n      )}\n\n      {/* Overwrite Confirmation Dialog */}\n      {showOverwriteDialog && (\n        <div className=\"ship-name-conflict-dialog\">\n          <div className=\"conflict-dialog-content\">\n            <h3>Ship Name Conflict</h3>\n            <p>A ship named \"{pendingShipName}\" already exists. Do you want to overwrite it?</p>\n            <div className=\"conflict-dialog-actions\">\n              <button \n                className=\"overwrite-btn\" \n                onClick={handleOverwriteConfirm}\n                disabled={saving}\n              >\n                {saving ? 'Overwriting...' : 'Overwrite'}\n              </button>\n              <button \n                className=\"change-name-btn\" \n                onClick={handleOverwriteCancel}\n                disabled={saving}\n              >\n                Cancel\n              </button>\n            </div>\n          </div>\n        </div>\n      )}\n\n    </div>\n  );\n};\n\nexport default SummaryPanel;"],"names":["SummaryPanel","shipDesign","mass","cost","staff","combinePilotNavigator","noStewards","onBackToShipSelect","saving","setSaving","useState","saveMessage","setSaveMessage","showCsvModal","setShowCsvModal","csvData","setCsvData","showOverwriteDialog","setShowOverwriteDialog","pendingShipName","setPendingShipName","useEffect","handleKeyDown","event","ctrlKey","key","preventDefault","handlePrint","printWindow","window","open","tonnageCode","getTonnageCode","ship","tonnage","sections","getNumberOfSections","hullInfo","shipTitle","name","configuration","tech_level","printContent","generateTableRows","rows","addRow","category","item","categoryDisplay","push","toFixed","engines","filter","engine","engine_type","performance","forEach","index","engineName","performanceCode","fittingRowIndex","hasBridge","fittings","some","f","fitting_type","hasHalfBridge","launchTubes","commsSensors","find","bridgeType","bridgeData","tube","launch_vehicle_mass","sensorType","COMMS_SENSORS_TYPES","t","type","comms_sensors_type","weapons","weapon","quantity","weaponDisplay","weapon_name","defenseRowIndex","activeDefenses","defenses","defense","hasSand","sand_reloads","length","defenseType","DEFENSE_TYPES","dt","defense_type","defenseName","defenseDisplay","berths","berth","berthType","BERTH_TYPES","bt","berth_type","berthName","berthDisplay","activeFacilities","facilities","facility","sort","a","b","facility_type","facilityType","FACILITY_TYPES","ft","facilityName","facilityDisplay","cargo","cargoType","CARGO_TYPES","ct","cargo_type","cargoName","vehicles","vehicle","vehicleType","VEHICLE_TYPES","vt","vehicle_type","vehicleName","replace","vehicleDisplay","drones","drone","droneType","DRONE_TYPES","drone_type","droneName","droneDisplay","used","total","join","document","write","close","focus","print","addEventListener","removeEventListener","tonnageCodeDisplay","sectionsDisplay","hullInfoDisplay","_jsxs","className","children","_jsx","toLocaleString","map","weaponRowIndex","activeWeapons","berthRowIndex","activeBerths","facilityRowIndex","cargoRowIndex","activeCargo","vehicleRowIndex","activeVehicles","droneRowIndex","activeDrones","_Fragment","pilot","navigator","engineers","gunners","service","stewards","nurses","surgeons","techs","includes","onClick","async","trim","setTimeout","databaseService","initialize","saveShip","error","console","errorMessage","Error","message","disabled","handleCsvExport","csvContent","generateCsvData","lines","shipInfoLine","allRows","row","value","readOnly","style","width","height","fontFamily","fontSize","padding","border","borderRadius","saveOrUpdateShipByName","handleOverwriteCancel"],"sourceRoot":""}