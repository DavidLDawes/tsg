{"version":3,"file":"548.e878be66bd9c5fad9f0c.js","mappings":"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","sources":["webpack://starship-designer/./src/utils/sparesCalculation.ts","webpack://starship-designer/./src/components/CargoPanel.tsx"],"sourcesContent":["/**\n * Calculate months between service based on spares tonnage and ship tonnage\n * @param spares - Tonnage of spares carried\n * @param shipTonnage - Total ship tonnage\n * @returns Months between service (minimum 1)\n */\nexport function calculateMonthsBetweenService(spares: number, shipTonnage: number): number {\n  return 1 + Math.floor((spares / shipTonnage) * 100);\n}\n\n/**\n * Calculate the tonnage increment needed for spares to achieve the next service interval\n * @param currentSpares - Current spares tonnage\n * @param shipTonnage - Total ship tonnage\n * @returns Tonnage increment needed\n */\nexport function getSparesIncrement(currentSpares: number, shipTonnage: number): number {\n  const currentMonths = calculateMonthsBetweenService(currentSpares, shipTonnage);\n  const nextMonth = currentMonths + 1;\n  const requiredSpares = Math.ceil((nextMonth - 1) * shipTonnage / 100);\n  return Math.max(1, requiredSpares - currentSpares);\n}\n\n/**\n * Calculate the percentage of ship tonnage that spares represent\n * @param spares - Tonnage of spares carried\n * @param shipTonnage - Total ship tonnage\n * @returns Percentage (0-100)\n */\nexport function getSparesPercentage(spares: number, shipTonnage: number): number {\n  return (spares / shipTonnage) * 100;\n}","import React from 'react';\nimport type { Cargo } from '../types/ship';\nimport { CARGO_TYPES } from '../data/constants';\nimport { calculateMonthsBetweenService, getSparesIncrement } from '../utils/sparesCalculation';\n\ninterface CargoPanelProps {\n  cargo: Cargo[];\n  remainingMass: number;\n  shipTonnage: number;\n  onUpdate: (cargo: Cargo[]) => void;\n}\n\nconst CargoPanel: React.FC<CargoPanelProps> = ({ cargo, remainingMass, shipTonnage, onUpdate }) => {\n  const updateCargoTonnage = (cargoType: typeof CARGO_TYPES[0], newTonnage: number) => {\n    const newCargo = [...cargo];\n    const existingIndex = newCargo.findIndex(c => c.cargo_type === cargoType.type);\n    \n    if (newTonnage === 0) {\n      // Remove cargo if tonnage is 0\n      if (existingIndex >= 0) {\n        newCargo.splice(existingIndex, 1);\n      }\n    } else {\n      const cargoData: Cargo = {\n        cargo_type: cargoType.type as Cargo['cargo_type'],\n        tonnage: newTonnage,\n        cost: cargoType.costPerTon * newTonnage\n      };\n      \n      if (existingIndex >= 0) {\n        newCargo[existingIndex] = cargoData;\n      } else {\n        newCargo.push(cargoData);\n      }\n    }\n    \n    onUpdate(newCargo);\n  };\n\n  const getCargoTonnage = (cargoType: string): number => {\n    const cargoItem = cargo.find(c => c.cargo_type === cargoType);\n    return cargoItem?.tonnage || 0;\n  };\n\n  const getTotalCargoTonnage = (): number => {\n    return cargo.reduce((sum, c) => sum + c.tonnage, 0);\n  };\n\n  const getSparesTonnage = (): number => {\n    const sparesItem = cargo.find(c => c.cargo_type === 'spares');\n    return sparesItem?.tonnage || 0;\n  };\n\n  return (\n    <div className=\"panel-content\">\n      <p>Configure cargo storage. Remaining mass: {remainingMass.toFixed(1)} tons</p>\n      <p>Total cargo: {getTotalCargoTonnage()} tons</p>\n      \n      <div className=\"cargo-grouped-layout\">\n        {/* Row 1: Basic Storage */}\n        <div className=\"cargo-group-row\">\n          {CARGO_TYPES.slice(0, 3).map(cargoType => {\n            const tonnage = getCargoTonnage(cargoType.type);\n            const maxTonnage = Math.floor(remainingMass + tonnage);\n            \n            // Special handling for Spares\n            if (cargoType.type === 'spares') {\n              const increment = getSparesIncrement(tonnage, shipTonnage);\n              return (\n                <div key={cargoType.type} className=\"component-item\">\n                  <div className=\"component-info\">\n                    <h4>{cargoType.name}</h4>\n                    <p>{cargoType.costPerTon} MCr per ton</p>\n                    {tonnage > 0 && (\n                      <p><strong>Total:</strong> {tonnage} tons, {(cargoType.costPerTon * tonnage).toFixed(2)} MCr</p>\n                    )}\n                  </div>\n                  <div className=\"quantity-control\">\n                    <button \n                      onClick={() => updateCargoTonnage(cargoType, Math.max(0, tonnage - increment))}\n                      disabled={tonnage === 0}\n                    >\n                      -\n                    </button>\n                    <span>{tonnage} tons</span>\n                    <button \n                      onClick={() => updateCargoTonnage(cargoType, Math.min(maxTonnage, tonnage + increment))}\n                      disabled={tonnage + increment > maxTonnage}\n                    >\n                      +\n                    </button>\n                  </div>\n                </div>\n              );\n            }\n            \n            return (\n              <div key={cargoType.type} className=\"component-item\">\n                <div className=\"component-info\">\n                  <h4>{cargoType.name}</h4>\n                  <p>{cargoType.costPerTon} MCr per ton</p>\n                  {tonnage > 0 && (\n                    <p><strong>Total:</strong> {tonnage} tons, {(cargoType.costPerTon * tonnage).toFixed(2)} MCr</p>\n                  )}\n                </div>\n                <div className=\"tonnage-control\">\n                  <label>\n                    Tonnage:\n                    <input\n                      type=\"number\"\n                      min=\"0\"\n                      max={maxTonnage}\n                      value={tonnage}\n                      onChange={(e) => updateCargoTonnage(cargoType, Math.max(0, Math.min(maxTonnage, parseInt(e.target.value) || 0)))}\n                      style={{ width: '60px', marginLeft: '0.5rem' }}\n                    />\n                    <small>/{maxTonnage}</small>\n                  </label>\n                </div>\n              </div>\n            );\n          })}\n        </div>\n\n        {/* Row 2: Specialized Storage */}\n        <div className=\"cargo-group-row\">\n          {CARGO_TYPES.slice(3, 6).map(cargoType => {\n            const tonnage = getCargoTonnage(cargoType.type);\n            const maxTonnage = Math.floor(remainingMass + tonnage);\n            \n            return (\n              <div key={cargoType.type} className=\"component-item\">\n                <div className=\"component-info\">\n                  <h4>{cargoType.name}</h4>\n                  <p>{cargoType.costPerTon} MCr per ton</p>\n                  {tonnage > 0 && (\n                    <p><strong>Total:</strong> {tonnage} tons, {(cargoType.costPerTon * tonnage).toFixed(2)} MCr</p>\n                  )}\n                </div>\n                <div className=\"tonnage-control\">\n                  <label>\n                    Tonnage:\n                    <input\n                      type=\"number\"\n                      min=\"0\"\n                      max={maxTonnage}\n                      value={tonnage}\n                      onChange={(e) => updateCargoTonnage(cargoType, Math.max(0, Math.min(maxTonnage, parseInt(e.target.value) || 0)))}\n                      style={{ width: '60px', marginLeft: '0.5rem' }}\n                    />\n                    <small>/{maxTonnage}</small>\n                  </label>\n                </div>\n              </div>\n            );\n          })}\n        </div>\n\n        {/* Row 3: Life Support Storage */}\n        <div className=\"cargo-group-row\">\n          {CARGO_TYPES.slice(6, 8).map(cargoType => {\n            const tonnage = getCargoTonnage(cargoType.type);\n            const maxTonnage = Math.floor(remainingMass + tonnage);\n            \n            return (\n              <div key={cargoType.type} className=\"component-item\">\n                <div className=\"component-info\">\n                  <h4>{cargoType.name}</h4>\n                  <p>{cargoType.costPerTon} MCr per ton</p>\n                  {tonnage > 0 && (\n                    <p><strong>Total:</strong> {tonnage} tons, {(cargoType.costPerTon * tonnage).toFixed(2)} MCr</p>\n                  )}\n                </div>\n                <div className=\"tonnage-control\">\n                  <label>\n                    Tonnage:\n                    <input\n                      type=\"number\"\n                      min=\"0\"\n                      max={maxTonnage}\n                      value={tonnage}\n                      onChange={(e) => updateCargoTonnage(cargoType, Math.max(0, Math.min(maxTonnage, parseInt(e.target.value) || 0)))}\n                      style={{ width: '60px', marginLeft: '0.5rem' }}\n                    />\n                    <small>/{maxTonnage}</small>\n                  </label>\n                </div>\n              </div>\n            );\n          })}\n        </div>\n      </div>\n\n      <div className=\"cargo-summary\">\n        <h3>Cargo Summary</h3>\n        {cargo.length === 0 ? (\n          <p>No cargo configured.</p>\n        ) : (\n          <table>\n            <thead>\n              <tr>\n                <th>Cargo Type</th>\n                <th>Tonnage</th>\n                <th>Cost per Ton</th>\n                <th>Total Cost (MCr)</th>\n              </tr>\n            </thead>\n            <tbody>\n              {cargo.map(cargoItem => (\n                <tr key={cargoItem.cargo_type}>\n                  <td>{CARGO_TYPES.find(ct => ct.type === cargoItem.cargo_type)?.name || cargoItem.cargo_type}</td>\n                  <td>{cargoItem.tonnage}</td>\n                  <td>{CARGO_TYPES.find(ct => ct.type === cargoItem.cargo_type)?.costPerTon || 0}</td>\n                  <td>{cargoItem.cost.toFixed(2)}</td>\n                </tr>\n              ))}\n            </tbody>\n          </table>\n        )}\n      </div>\n\n      <div className=\"service-interval\">\n        <h3>Maintenance Schedule</h3>\n        <div className=\"service-info\">\n          <p><strong>Months Between Service:</strong> {calculateMonthsBetweenService(getSparesTonnage(), shipTonnage)}</p>\n          <p className=\"service-calculation\">\n            Based on: 1 + {getSparesTonnage()} spares รท {shipTonnage} ship tons ร 100 = 1 + {Math.floor(getSparesTonnage() / shipTonnage * 100)}\n          </p>\n        </div>\n      </div>\n\n    </div>\n  );\n};\n\nexport default CargoPanel;"],"names":["calculateMonthsBetweenService","spares","shipTonnage","Math","floor","CargoPanel","cargo","remainingMass","onUpdate","updateCargoTonnage","cargoType","newTonnage","newCargo","existingIndex","findIndex","c","cargo_type","type","splice","cargoData","tonnage","cost","costPerTon","push","getCargoTonnage","cargoItem","find","getSparesTonnage","sparesItem","_jsxs","className","children","toFixed","reduce","sum","_jsx","CARGO_TYPES","slice","map","maxTonnage","increment","currentSpares","nextMonth","requiredSpares","ceil","max","getSparesIncrement","name","onClick","disabled","min","value","onChange","e","parseInt","target","style","width","marginLeft","length","ct"],"sourceRoot":""}