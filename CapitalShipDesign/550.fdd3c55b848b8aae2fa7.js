"use strict";(self.webpackChunkstarship_designer=self.webpackChunkstarship_designer||[]).push([[550],{550:(e,s,n)=>{n.r(s),n.d(s,{default:()=>r}),n(540);var t=n(749),i=n(848);const r=({fittings:e,shipTonnage:s,shipTechLevel:n,engines:r,shipSections:l,onUpdate:a})=>{const c=e.some(e=>"bridge"===e.fitting_type),o=e.some(e=>"half_bridge"===e.fitting_type),d=e.filter(e=>"launch_tube"===e.fitting_type),m=e.find(e=>"comms_sensors"===e.fitting_type),h=e.find(e=>"computer"===e.fitting_type),u=l||1,p=e=>{const s=e?"Half Bridge":"Bridge";if(!l||l<2)return s;if(2===l)return`${s} and Section Command`;const n=l-1;return`${s} and ${n} Section Command${n>1?"s":""}`},f=n=>{const{mass:i,cost:r}=(0,t.Ol)(s,n),l=e.filter(e=>"bridge"!==e.fitting_type&&"half_bridge"!==e.fitting_type),c=i*u,o=r*u;l.push({fitting_type:n?"half_bridge":"bridge",mass:c,cost:o}),a(l)};return(0,i.jsxs)("div",{className:"panel-content",children:[(0,i.jsxs)("div",{className:"form-group",children:[(0,i.jsx)("h3",{children:"Bridge Type (Required) *"}),l&&l>=2&&(0,i.jsxs)("p",{className:"info-message",children:["Capital ships require a bridge plus command modules for each section (",l," total)."]}),(0,i.jsxs)("div",{className:"radio-group",children:[(0,i.jsxs)("label",{children:[(0,i.jsx)("input",{type:"radio",checked:c,onChange:()=>f(!1)}),p(!1)," (",(0,t.Ol)(s,!1).mass*u," tons, ",(0,t.Ol)(s,!1).cost*u," MCr)"]}),(0,i.jsxs)("label",{children:[(0,i.jsx)("input",{type:"radio",checked:o,onChange:()=>f(!0)}),p(!0)," (",(0,t.Ol)(s,!0).mass*u," tons, ",(0,t.Ol)(s,!0).cost*u," MCr)"]})]})]}),(0,i.jsxs)("div",{className:"form-group",children:[(0,i.jsx)("h3",{children:"Launch Tubes (Optional)"}),(0,i.jsx)("p",{children:"Launch tubes allow deployment of vehicles. Each tube is sized for a specific vehicle mass."}),d.map((s,n)=>(0,i.jsxs)("div",{className:"component-item",children:[(0,i.jsx)("div",{className:"component-info",children:(0,i.jsxs)("h4",{children:["Launch Tube ",n+1," for ",s.launch_vehicle_mass||1," ton vehicle"]})}),(0,i.jsxs)("div",{className:"component-controls",children:[(0,i.jsxs)("label",{children:["Vehicle Mass:",(0,i.jsx)("input",{type:"number",min:"0.1",step:"0.1",value:s.launch_vehicle_mass||1,onChange:s=>((s,n)=>{const t=[...e],i=e.findIndex((n,t)=>"launch_tube"===n.fitting_type&&e.slice(0,t+1).filter(e=>"launch_tube"===e.fitting_type).length===s+1);i>=0&&(t[i]={...t[i],launch_vehicle_mass:n,mass:25*n,cost:.5*n},a(t))})(n,parseFloat(s.target.value)||1),style:{width:"80px",marginLeft:"0.5rem"}}),"tons"]}),(0,i.jsx)("button",{onClick:()=>(s=>{const n=e.filter((n,t)=>"launch_tube"!==n.fitting_type||e.slice(0,t+1).filter(e=>"launch_tube"===e.fitting_type).length-1!==s);a(n)})(n),className:"remove-btn",children:"Remove"})]})]},n)),(0,i.jsx)("button",{onClick:()=>{const s=[...e];s.push({fitting_type:"launch_tube",mass:25,cost:.5,launch_vehicle_mass:1}),a(s)},className:"add-btn",children:"Add Launch Tube"})]}),(0,i.jsxs)("div",{className:"form-group",children:[(0,i.jsx)("h3",{children:"Comms & Sensors"}),(0,i.jsx)("p",{children:"Communications and sensor systems for the starship. Standard is included by default."}),(0,i.jsx)("label",{htmlFor:"comms-sensors",children:"Comms & Sensors Type"}),(0,i.jsx)("select",{id:"comms-sensors",value:m?.comms_sensors_type||"standard",onChange:s=>{const n=t.EH.find(e=>e.type===s.target.value);n&&(s=>{const n=e.filter(e=>"comms_sensors"!==e.fitting_type);n.push({fitting_type:"comms_sensors",comms_sensors_type:s.type,mass:s.mass,cost:s.cost}),a(n)})(n)},children:t.EH.map(e=>(0,i.jsxs)("option",{value:e.type,children:[e.name," (",e.mass," tons, ",e.cost," MCr)"]},e.type))})]}),(0,i.jsxs)("div",{className:"form-group",children:[(0,i.jsx)("h3",{children:"Computer"}),(()=>{const l=r.find(e=>"jump_drive"===e.engine_type),c=l?.performance||0,o=(0,t._8)(s,c),d=t.q1.filter(e=>{const s=t.Tb.indexOf(n);if(-1===s)return!1;const i=s+10;return e.techLevel<=i}),m=o?t.q1.findIndex(e=>e.name===o.name):-1;return(0,i.jsxs)(i.Fragment,{children:[o?(0,i.jsxs)("p",{children:["Minimum required: ",(0,i.jsx)("strong",{children:o.name})," (TL ",o.techLevel,", Rating ",o.rating,")",(0,i.jsx)("br",{}),(0,i.jsxs)("small",{children:["Based on ship size (",s.toLocaleString()," tons) and jump performance (J-",c,")"]})]}):(0,i.jsxs)("p",{className:"info-message",children:["No computer required for this configuration, but you may install one if desired.",0===c&&(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("br",{}),(0,i.jsx)("small",{children:"Ships with jump drives may require computers depending on tonnage and jump performance."})]})]}),0===d.length?(0,i.jsx)("p",{className:"warning-message",children:o?`Ship requires ${o.name} but current tech level is too low (TL ${o.techLevel} required).`:`No computers available at current tech level (TL ${n}).`}):(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("label",{htmlFor:"computer",children:"Computer Model"}),(0,i.jsxs)("select",{id:"computer",value:h?.computer_model||"",onChange:s=>(s=>{const n=e.filter(e=>"computer"!==e.fitting_type);if(s){const e=t.q1.find(e=>e.model===s);e&&n.push({fitting_type:"computer",computer_model:s,mass:0,cost:e.cost})}a(n)})(s.target.value||null),children:[(0,i.jsx)("option",{value:"",children:"None"}),d.map(e=>{const s=-1===m||t.q1.findIndex(s=>s.model===e.model)>=m;return(0,i.jsxs)("option",{value:e.model,children:[e.name," - Rating ",e.rating,", TL ",e.techLevel,", ",e.cost," MCr",s?"":" (below minimum)"]},e.model)})]}),h&&(()=>{const e=t.q1.find(e=>e.model===h.computer_model);return e?(0,i.jsxs)("small",{children:["Selected: ",e.name,", Rating ",e.rating,", Cost: ",e.cost," MCr (0 tons)"]}):null})()]})]})})()]}),(0,i.jsxs)("div",{className:"validation-info",children:[(0,i.jsx)("h3",{children:"Requirements:"}),(0,i.jsxs)("ul",{children:[(0,i.jsx)("li",{className:c||o?"valid":"invalid",children:"✓ Bridge or Half Bridge selected"}),(()=>{const e=r.find(e=>"jump_drive"===e.engine_type),n=e?.performance||0,l=(0,t._8)(s,n);if(l){const e=h&&t.q1.findIndex(e=>e.model===h.computer_model)>=t.q1.findIndex(e=>e.name===l.name);return(0,i.jsxs)("li",{className:e?"valid":"invalid",children:[e?"✓":"✗"," Computer (",l.name," or better required)"]})}return null})()]})]})]})}}}]);
//# sourceMappingURL=550.fdd3c55b848b8aae2fa7.js.map