{"version":3,"file":"619.a18c460da1cd0f55aeee.js","mappings":"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","sources":["webpack://starship-designer/./src/components/DefensesPanel.tsx"],"sourcesContent":["import React from 'react';\nimport type { Defense } from '../types/ship';\nimport { DEFENSE_TYPES, getWeaponMountLimit, getAvailableArmorOptions, calculateArmorMass, calculateArmorCost, getArmorFactorPerIncrement, getMaxScreens, getScreenSpecs } from '../data/constants';\n\ninterface DefensesPanelProps {\n  defenses: Defense[];\n  shipTonnage: number;\n  shipTechLevel: string;\n  weaponsCount: number;\n  sandReloads: number;\n  armorPercentage: number;\n  remainingMass: number;\n  onUpdate: (defenses: Defense[]) => void;\n  onSandReloadsUpdate: (reloads: number) => void;\n  onArmorUpdate: (percentage: number) => void;\n}\n\nconst DefensesPanel: React.FC<DefensesPanelProps> = ({\n  defenses,\n  shipTonnage,\n  shipTechLevel,\n  weaponsCount,\n  sandReloads,\n  armorPercentage,\n  remainingMass,\n  onUpdate,\n  onSandReloadsUpdate,\n  onArmorUpdate\n}) => {\n  const maxMountLimit = getWeaponMountLimit(shipTonnage);\n  const currentTurretCount = defenses.reduce((sum, defense) => sum + defense.quantity, 0);\n  const availableSlots = maxMountLimit - weaponsCount - currentTurretCount;\n\n  // Check if any sandcaster turrets are installed\n  const hasSandcasters = defenses.some(defense => \n    defense.defense_type.includes('sandcaster') && defense.quantity > 0\n  );\n  \n  // Calculate maximum sand reloads based on remaining mass\n  const maxSandReloads = Math.floor(remainingMass - sandReloads);\n\n  const updateDefenseQuantity = (defenseType: typeof DEFENSE_TYPES[0], quantity: number) => {\n    const validQuantity = Math.max(0, Math.floor(quantity));\n    const existingDefense = defenses.find(d => d.defense_type === defenseType.type);\n\n    if (validQuantity === 0) {\n      // Remove the defense if quantity is 0\n      onUpdate(defenses.filter(d => d.defense_type !== defenseType.type));\n    } else if (existingDefense) {\n      // Update existing defense\n      const newDefenses = defenses.map(d =>\n        d.defense_type === defenseType.type\n          ? { ...d, quantity: validQuantity }\n          : d\n      );\n      onUpdate(newDefenses);\n    } else {\n      // Add new defense\n      const newDefense: Defense = {\n        defense_type: defenseType.type as Defense['defense_type'],\n        quantity: validQuantity,\n        mass: defenseType.mass,\n        cost: defenseType.cost\n      };\n      onUpdate([...defenses, newDefense]);\n    }\n  };\n\n  const updateScreenQuantity = (screenType: 'nuclear_damper' | 'meson_screen' | 'black_globe', quantity: number) => {\n    const specs = getScreenSpecs(screenType, shipTonnage);\n    if (!specs) return;\n\n    const newDefenses = defenses.filter(d => d.defense_type !== screenType);\n\n    if (quantity > 0) {\n      newDefenses.push({\n        defense_type: screenType,\n        mass: specs.mass * quantity,\n        cost: specs.cost * quantity,\n        quantity\n      });\n    }\n\n    onUpdate(newDefenses);\n  };\n\n  return (\n    <div className=\"panel-content\">\n      <p>Available defense turret mounts: {maxMountLimit} (Used: {weaponsCount + currentTurretCount}, Remaining: {availableSlots})</p>\n      \n      <div className=\"defenses-grouped-layout\">\n        {/* Sandcaster Turret Group */}\n        <div className=\"defense-group-row\">\n          {DEFENSE_TYPES.filter(d => d.name.includes('Sandcaster')).map(defenseType => {\n            const currentDefense = defenses.find(d => d.defense_type === defenseType.type);\n            const quantity = currentDefense?.quantity || 0;\n\n            return (\n              <div key={defenseType.type} className=\"component-item\">\n                <div className=\"component-info\">\n                  <h4>{defenseType.name}, {defenseType.mass} tons, {defenseType.cost} MCr</h4>\n                </div>\n                <div className=\"quantity-control\">\n                  <label>\n                    Quantity:\n                    <input\n                      type=\"number\"\n                      min=\"0\"\n                      value={quantity}\n                      onChange={(e) => updateDefenseQuantity(defenseType, parseInt(e.target.value) || 0)}\n                      style={{ width: '60px', marginLeft: '0.5rem' }}\n                    />\n                  </label>\n                </div>\n              </div>\n            );\n          })}\n        </div>\n\n        {/* Point Defense Laser Turret Group */}\n        <div className=\"defense-group-row\">\n          {DEFENSE_TYPES.filter(d => d.name.includes('Point Defense')).map(defenseType => {\n            const currentDefense = defenses.find(d => d.defense_type === defenseType.type);\n            const quantity = currentDefense?.quantity || 0;\n\n            return (\n              <div key={defenseType.type} className=\"component-item\">\n                <div className=\"component-info\">\n                  <h4>{defenseType.name}, {defenseType.mass} tons, {defenseType.cost} MCr</h4>\n                </div>\n                <div className=\"quantity-control\">\n                  <label>\n                    Quantity:\n                    <input\n                      type=\"number\"\n                      min=\"0\"\n                      value={quantity}\n                      onChange={(e) => updateDefenseQuantity(defenseType, parseInt(e.target.value) || 0)}\n                      style={{ width: '60px', marginLeft: '0.5rem' }}\n                    />\n                  </label>\n                </div>\n              </div>\n            );\n          })}\n        </div>\n      </div>\n\n      <div className=\"armor-section\">\n        <h3>Armor</h3>\n        <p>\n          Tech Level {shipTechLevel} armor provides AF-{getArmorFactorPerIncrement(shipTechLevel)} per 5% of ship tonnage.\n          {getArmorFactorPerIncrement(shipTechLevel) === 4 ? ' (Crystaliron)' : ' (Advanced Armor)'}\n        </p>\n        <div className=\"form-group\">\n          <label htmlFor=\"armor-percentage\">Armor Coverage</label>\n          <select\n            id=\"armor-percentage\"\n            value={armorPercentage || 0}\n            onChange={(e) => onArmorUpdate(parseInt(e.target.value))}\n          >\n            <option value=\"0\">No Armor (AF-0)</option>\n            {getAvailableArmorOptions(shipTechLevel).map(option => (\n              <option key={option.percentage} value={option.percentage}>\n                {option.label}\n              </option>\n            ))}\n          </select>\n          {armorPercentage > 0 && (\n            <small>\n              Mass: {calculateArmorMass(shipTonnage, armorPercentage).toFixed(1)} tons,\n              Cost: {calculateArmorCost(calculateArmorMass(shipTonnage, armorPercentage)).toFixed(2)} MCr\n            </small>\n          )}\n        </div>\n      </div>\n\n      {hasSandcasters && (\n        <div className=\"sand-reloads-section\">\n          <h3>Sand Reloads</h3>\n          <p>Sandcaster turrets detected. You can allocate tonnage for sand reloads.</p>\n          <div className=\"form-group\">\n            <label htmlFor=\"sand-reloads\">Sand Reload Tonnage</label>\n            <input\n              id=\"sand-reloads\"\n              type=\"number\"\n              min=\"0\"\n              max={maxSandReloads + sandReloads}\n              value={sandReloads}\n              onChange={(e) => onSandReloadsUpdate(Math.max(0, parseInt(e.target.value) || 0))}\n            />\n            <small>\n              0 - {maxSandReloads + sandReloads} tons available.\n              Cost: {(sandReloads * 0.1).toFixed(1)} MCr (0.1 MCr per ton)\n            </small>\n          </div>\n\n          {sandReloads > 0 && (\n            <div className=\"sand-summary\">\n              <p><strong>Sand Reloads:</strong> {sandReloads} tons ({(sandReloads * 0.1).toFixed(1)} MCr)</p>\n              <p><small>Provides additional sand ammunition for sandcaster turrets</small></p>\n            </div>\n          )}\n        </div>\n      )}\n\n      <div className=\"screens-section\">\n        <h3>Defensive Screens</h3>\n        <p>Advanced defensive systems for capital ships. Availability depends on tech level and hull size.</p>\n\n        {/* Nuclear Dampers */}\n        {(() => {\n          const maxNuclearDampers = getMaxScreens('nuclear_damper', shipTechLevel);\n          const nuclearDamperSpecs = getScreenSpecs('nuclear_damper', shipTonnage);\n          const currentNuclearDampers = defenses.find(d => d.defense_type === 'nuclear_damper')?.quantity || 0;\n\n          if (maxNuclearDampers === 0 || !nuclearDamperSpecs) {\n            return (\n              <div className=\"screen-item\">\n                <h4>Nuclear Dampers</h4>\n                <p className=\"info-message\">Not available (requires TL 12+ and hull code CA+)</p>\n              </div>\n            );\n          }\n\n          return (\n            <div className=\"screen-item\">\n              <h4>Nuclear Dampers</h4>\n              <p>Max allowed: {maxNuclearDampers} | Per screen: {nuclearDamperSpecs.mass} tons, {nuclearDamperSpecs.cost} MCr</p>\n              <div className=\"form-group\">\n                <label htmlFor=\"nuclear-dampers\">Number of Nuclear Dampers</label>\n                <input\n                  id=\"nuclear-dampers\"\n                  type=\"number\"\n                  min=\"0\"\n                  max={maxNuclearDampers}\n                  value={currentNuclearDampers}\n                  onChange={(e) => updateScreenQuantity('nuclear_damper', Math.min(maxNuclearDampers, Math.max(0, parseInt(e.target.value) || 0)))}\n                />\n                {currentNuclearDampers > 0 && (\n                  <small>\n                    Total: {nuclearDamperSpecs.mass * currentNuclearDampers} tons, {nuclearDamperSpecs.cost * currentNuclearDampers} MCr\n                  </small>\n                )}\n              </div>\n            </div>\n          );\n        })()}\n\n        {/* Meson Screens */}\n        {(() => {\n          const maxMesonScreens = getMaxScreens('meson_screen', shipTechLevel);\n          const mesonScreenSpecs = getScreenSpecs('meson_screen', shipTonnage);\n          const currentMesonScreens = defenses.find(d => d.defense_type === 'meson_screen')?.quantity || 0;\n\n          if (maxMesonScreens === 0 || !mesonScreenSpecs) {\n            return (\n              <div className=\"screen-item\">\n                <h4>Meson Screens</h4>\n                <p className=\"info-message\">Not available (requires TL 12+ and hull code CA+)</p>\n              </div>\n            );\n          }\n\n          return (\n            <div className=\"screen-item\">\n              <h4>Meson Screens</h4>\n              <p>Max allowed: {maxMesonScreens} | Per screen: {mesonScreenSpecs.mass} tons, {mesonScreenSpecs.cost} MCr</p>\n              <div className=\"form-group\">\n                <label htmlFor=\"meson-screens\">Number of Meson Screens</label>\n                <input\n                  id=\"meson-screens\"\n                  type=\"number\"\n                  min=\"0\"\n                  max={maxMesonScreens}\n                  value={currentMesonScreens}\n                  onChange={(e) => updateScreenQuantity('meson_screen', Math.min(maxMesonScreens, Math.max(0, parseInt(e.target.value) || 0)))}\n                />\n                {currentMesonScreens > 0 && (\n                  <small>\n                    Total: {mesonScreenSpecs.mass * currentMesonScreens} tons, {mesonScreenSpecs.cost * currentMesonScreens} MCr\n                  </small>\n                )}\n              </div>\n            </div>\n          );\n        })()}\n\n        {/* Black Globes */}\n        {(() => {\n          const maxBlackGlobes = getMaxScreens('black_globe', shipTechLevel);\n          const blackGlobeSpecs = getScreenSpecs('black_globe', shipTonnage);\n          const currentBlackGlobes = defenses.find(d => d.defense_type === 'black_globe')?.quantity || 0;\n\n          if (maxBlackGlobes === 0 || !blackGlobeSpecs) {\n            return (\n              <div className=\"screen-item\">\n                <h4>Black Globes (Force Fields)</h4>\n                <p className=\"info-message\">Not available (requires TL 15+ and hull code CA+)</p>\n              </div>\n            );\n          }\n\n          return (\n            <div className=\"screen-item\">\n              <h4>Black Globes (Force Fields)</h4>\n              <p>Max allowed: {maxBlackGlobes} | Per field: {blackGlobeSpecs.mass} tons, {blackGlobeSpecs.cost} MCr</p>\n              <div className=\"form-group\">\n                <label htmlFor=\"black-globes\">Number of Black Globes</label>\n                <input\n                  id=\"black-globes\"\n                  type=\"number\"\n                  min=\"0\"\n                  max={maxBlackGlobes}\n                  value={currentBlackGlobes}\n                  onChange={(e) => updateScreenQuantity('black_globe', Math.min(maxBlackGlobes, Math.max(0, parseInt(e.target.value) || 0)))}\n                />\n                {currentBlackGlobes > 0 && (\n                  <small>\n                    Total: {blackGlobeSpecs.mass * currentBlackGlobes} tons, {blackGlobeSpecs.cost * currentBlackGlobes} MCr\n                  </small>\n                )}\n              </div>\n            </div>\n          );\n        })()}\n      </div>\n\n    </div>\n  );\n};\n\nexport default DefensesPanel;"],"names":["DefensesPanel","defenses","shipTonnage","shipTechLevel","weaponsCount","sandReloads","armorPercentage","remainingMass","onUpdate","onSandReloadsUpdate","onArmorUpdate","maxMountLimit","getWeaponMountLimit","currentTurretCount","reduce","sum","defense","quantity","availableSlots","hasSandcasters","some","defense_type","includes","maxSandReloads","Math","floor","updateDefenseQuantity","defenseType","validQuantity","max","existingDefense","find","d","type","filter","newDefenses","map","newDefense","mass","cost","updateScreenQuantity","screenType","specs","getScreenSpecs","push","_jsxs","className","children","_jsx","DEFENSE_TYPES","name","currentDefense","min","value","onChange","e","parseInt","target","style","width","marginLeft","getArmorFactorPerIncrement","htmlFor","id","getAvailableArmorOptions","option","percentage","label","calculateArmorMass","toFixed","calculateArmorCost","maxNuclearDampers","getMaxScreens","nuclearDamperSpecs","currentNuclearDampers","maxMesonScreens","mesonScreenSpecs","currentMesonScreens","maxBlackGlobes","blackGlobeSpecs","currentBlackGlobes"],"sourceRoot":""}