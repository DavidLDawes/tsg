"use strict";(self.webpackChunkstarship_designer=self.webpackChunkstarship_designer||[]).push([[660],{660:(e,i,n)=>{n.r(i),n.d(i,{default:()=>c});var s=n(540),l=n(749),a=n(635),t=n(848);const c=({ship:e,onUpdate:i,onLoadExistingShip:n})=>{const[c,o]=(0,s.useState)({isChecking:!1,existingShipFound:!1,showConflictDialog:!1,existingShip:null}),[r,h]=(0,s.useState)({showWarning:!1,pendingTonnage:null}),d=(0,s.useCallback)(async e=>{if(!e.trim()||e.length<2)o(e=>({...e,existingShipFound:!1,showConflictDialog:!1}));else try{o(e=>({...e,isChecking:!0})),await a.v.initialize();const i=await a.v.getShipByName(e.trim());o(i?{isChecking:!1,existingShipFound:!0,showConflictDialog:!0,existingShip:{ship:i.ship,engines:i.engines,fittings:i.fittings,weapons:i.weapons,defenses:i.defenses,berths:i.berths,facilities:i.facilities,cargo:i.cargo,vehicles:i.vehicles,drones:i.drones}}:{isChecking:!1,existingShipFound:!1,showConflictDialog:!1,existingShip:null})}catch(e){console.error("Error checking ship name:",e),o(e=>({...e,isChecking:!1}))}},[]);(0,s.useEffect)(()=>{e.name.trim()&&e.name.length>=2&&d(e.name);const i=setTimeout(()=>{d(e.name)},1500);return()=>clearTimeout(i)},[e.name,d]);const g=(n,s)=>{i({...e,[n]:s})};return(0,t.jsxs)("div",{className:"panel-content",children:[(0,t.jsxs)("div",{className:"ship-basic-info-row",children:[(0,t.jsxs)("div",{className:"form-group",children:[(0,t.jsx)("label",{htmlFor:"ship-name",children:"Ship Name *"}),(0,t.jsxs)("div",{className:"ship-name-input-container",children:[(0,t.jsx)("input",{id:"ship-name",type:"text",maxLength:32,value:e.name,onChange:e=>g("name",e.target.value),placeholder:"Enter ship name (max 32 characters)",className:c.existingShipFound?"name-conflict":""}),c.isChecking&&(0,t.jsx)("span",{className:"name-check-status checking",children:"Checking..."}),c.existingShipFound&&!c.showConflictDialog&&(0,t.jsx)("span",{className:"name-check-status conflict",children:"Ship name already exists"})]}),(0,t.jsxs)("small",{children:[e.name.length,"/32 characters"]})]}),(0,t.jsxs)("div",{className:"form-group",children:[(0,t.jsx)("label",{htmlFor:"tonnage",children:"Hull Size *"}),(0,t.jsx)("select",{id:"tonnage",value:e.tonnage,onChange:n=>{var s;(s=parseInt(n.target.value))<3e3?h({showWarning:!0,pendingTonnage:s}):i({...e,tonnage:s})},children:l.Tw.map(e=>(0,t.jsxs)("option",{value:e.tonnage,children:[e.tonnage.toLocaleString()," tons - ",e.cost.toLocaleString()," MCr"]},e.tonnage))})]}),(0,t.jsxs)("div",{className:"form-group",children:[(0,t.jsx)("label",{htmlFor:"tech-level",children:"Tech Level *"}),(0,t.jsx)("select",{id:"tech-level",value:e.tech_level,onChange:e=>g("tech_level",e.target.value),children:l.Tb.map(e=>(0,t.jsx)("option",{value:e,children:e},e))})]}),(0,t.jsxs)("div",{className:"form-group",children:[(0,t.jsx)("label",{htmlFor:"configuration",children:"Configuration *"}),(0,t.jsxs)("select",{id:"configuration",value:e.configuration,onChange:e=>g("configuration",e.target.value),children:[(0,t.jsx)("option",{value:"standard",children:"Standard (wedge, cone, sphere or cylinder)"}),(0,t.jsx)("option",{value:"streamlined",children:"Streamlined (wing, disc or lifting body for atmospheric entry)"}),(0,t.jsx)("option",{value:"distributed",children:"Distributed (multiple sections, atmosphere/gravity incompatible)"})]})]}),(()=>{const i=(0,l.Qn)(e.tonnage),n=(0,l.X0)(e.tonnage);return i&&n?(0,t.jsxs)("div",{className:"info-message",children:[(0,t.jsxs)("p",{children:[(0,t.jsx)("strong",{children:"Hull Code:"})," ",i]}),(0,t.jsxs)("p",{children:[(0,t.jsx)("strong",{children:"Sections:"})," ",n]})]}):null})()]}),(0,t.jsx)("div",{className:"ship-description-row",children:(0,t.jsxs)("div",{className:"form-group",children:[(0,t.jsx)("label",{htmlFor:"description",children:"Description (Optional)"}),(0,t.jsx)("textarea",{id:"description",maxLength:250,value:e.description||"",onChange:e=>g("description",e.target.value),placeholder:"Enter ship description (max 250 characters)",rows:4}),(0,t.jsxs)("small",{children:[(e.description||"").length,"/250 characters"]})]})}),r.showWarning&&(0,t.jsx)("div",{className:"ship-name-conflict-dialog",children:(0,t.jsxs)("div",{className:"conflict-dialog-content",children:[(0,t.jsx)("h3",{children:"⚠️ Capital Ship Warning"}),(0,t.jsx)("p",{children:(0,t.jsx)("strong",{children:"Too small for a capital ship, designing it anyway"})}),(0,t.jsxs)("p",{children:["You've selected a hull size of ",(0,t.jsxs)("strong",{children:[r.pendingTonnage?.toLocaleString()," tons"]}),", which is below the 3,000-ton threshold typically used for capital ships."]}),(0,t.jsx)("p",{children:"Would you like to continue with this smaller hull size?"}),(0,t.jsxs)("div",{className:"conflict-dialog-actions",children:[(0,t.jsx)("button",{onClick:()=>{null!==r.pendingTonnage&&i({...e,tonnage:r.pendingTonnage}),h({showWarning:!1,pendingTonnage:null})},className:"load-existing-btn",children:"Continue"}),(0,t.jsx)("button",{onClick:()=>{h({showWarning:!1,pendingTonnage:null})},className:"change-name-btn",children:"Cancel"})]})]})}),c.showConflictDialog&&c.existingShip&&(0,t.jsx)("div",{className:"ship-name-conflict-dialog",children:(0,t.jsxs)("div",{className:"conflict-dialog-content",children:[(0,t.jsx)("h3",{children:"Ship Name Already Exists"}),(0,t.jsxs)("p",{children:['A ship named "',(0,t.jsx)("strong",{children:e.name}),'" already exists in your saved designs.']}),(0,t.jsxs)("div",{className:"existing-ship-info",children:[(0,t.jsx)("p",{children:(0,t.jsx)("strong",{children:"Existing Ship Details:"})}),(0,t.jsxs)("ul",{children:[(0,t.jsxs)("li",{children:["Tonnage: ",c.existingShip.ship.tonnage," tons"]}),(0,t.jsxs)("li",{children:["Tech Level: ",c.existingShip.ship.tech_level]}),(0,t.jsxs)("li",{children:["Configuration: ",c.existingShip.ship.configuration]}),c.existingShip.ship.description&&(0,t.jsxs)("li",{children:["Description: ",c.existingShip.ship.description]})]})]}),(0,t.jsxs)("div",{className:"conflict-dialog-actions",children:[(0,t.jsx)("button",{onClick:()=>{c.existingShip&&n&&n(c.existingShip),o(e=>({...e,showConflictDialog:!1}))},className:"load-existing-btn",disabled:!n,children:"Load Existing Ship"}),(0,t.jsx)("button",{onClick:()=>{const e=document.getElementById("ship-name");e&&e.focus()},className:"change-name-btn",children:"Choose Different Name"}),(0,t.jsx)("button",{onClick:()=>{o(e=>({...e,showConflictDialog:!1,existingShipFound:!1}))},className:"keep-name-btn",children:"Keep This Name (Will Replace)"})]})]})}),(0,t.jsxs)("div",{className:"validation-info",children:[(0,t.jsx)("h3",{children:"Requirements:"}),(0,t.jsxs)("ul",{children:[(0,t.jsx)("li",{className:e.name.trim()?"valid":"invalid",children:"✓ Ship name is required"}),(0,t.jsx)("li",{className:e.tech_level?"valid":"invalid",children:"✓ Tech level is required"}),(0,t.jsx)("li",{className:e.tonnage>=100?"valid":"invalid",children:"✓ Hull size is required"}),(0,t.jsx)("li",{className:e.configuration?"valid":"invalid",children:"✓ Configuration is required"})]})]})]})}}}]);
//# sourceMappingURL=660.ecd2531ed58d912a1fe3.js.map